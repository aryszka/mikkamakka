var env = (function () {
    var noPrint = function () { return noPrint; };

    var cerror = function (where, what, arg) {
        throw new Error(String(where) + ":" + String(what) + ":" + String(arg));
        return noPrint;
    };

    var argCheck = function (argObj, length, variadic) {
        if (argObj.length < length || !variadic && argObj.length !== length) {
            return cerror("procedure", "invalid number of arguments", argObj.length);
        }
        return noPrint;
    };

    var isSymbol = function (s) {
        argCheck(arguments, 1, false);
        return !!s &&
            s instanceof Array &&
            s.length === 1 &&
            typeof s[0] === "string";
    };

    var symbolName = function (symbol) {
        argCheck(arguments, 1, false);
        return symbol[0];
    };

    var stringToSymbol = function (name) {
        argCheck(arguments, 1, false);
        return [name];
    };

    var peq = function (left, right) {
        argCheck(arguments, 2, false);
        return left === right;
    };

    var filter = function (pred, l) {
        argCheck(arguments, 2, false);
        if (isNull(l)) {
            return list();
        }
        return pred(car(l)) ?
            cons(car(l), filter(pred, cdr(l))) :
            filter(pred, cdr(l));
    };

    var isTable = function (t) {
        argCheck(arguments, 1, false);
        return !!(t && t.table);
    };

    var makeNameTable = function () {
        argCheck(arguments, 0, false);
        return {table: {}};
    };

    var tableNames = function (table) {
        argCheck(arguments, 1, false);
        var names = [];
        for (var sname in table.table) {
            names = [[sname], names];
        }
        return names;
    };

    var tableHasName = function (table, name) {
        argCheck(arguments, 2, false);
        return symbolName(name) in table.table;
    };

    var tableLookup = function (table, name) {
        argCheck(arguments, 2, false);
        var val = table.table[symbolName(name)];
        if (typeof val === "undefined") {
            return cerror("tableLookup", "name is not defined", name);
        }
        return val;
    };

    var tableDefine = function (table, name, val) {
        argCheck(arguments, 3, false);
        table.table[symbolName(name)] = val;
        return val;
    };

    var tableSet = function (table, name, val) {
        argCheck(arguments, 3, false);
        if (!tableHasName(table, name)) {
            return cerror("tableSet", "name is not defined", name);
        }
        table.table[symbolName(name)] = val;
        return val;
    };

    var tableDelete = function (table, name) {
        argCheck(arguments, 2, false);
        var has = tableHasName(table, name);
        if (has) {
            delete table.table[name];
        }
        return has;
    };

    var isNull = function (l) {
        argCheck(arguments, 1, false);
        return !!l &&
            l instanceof Array &&
            l.length === 0;
    };

    var cons = function (left, right) {
        argCheck(arguments, 2, false);
        return [left, right];
    };

    var isPair = function (p) {
        argCheck(arguments, 1, false);
        return !!p &&
            p instanceof Array &&
            p.length === 2;
    };

    var car = function (p) {
        argCheck(arguments, 1, false);
        return p[0];
    };

    var cdr = function (p) {
        argCheck(arguments, 1, false);
        return p[1];
    };

    var list = function () {
        var l = [];
        for (var i = arguments.length - 1; i >= 0; i--) {
            l = cons(arguments[i], l);
        }
        return l;
    };

    var isCompiledProcedure = function (p) {
        argCheck(arguments, 1, false);
        return !!p && (typeof p.main === "function" || typeof p === "function");
    };

    var getMain = function (f) {
        argCheck(arguments, 1, false);
        return f.main || f;
    };

    var capply = function (p, args) {
        argCheck(arguments, 2, false);
        var jsArgs = [];
        for (;;) {
            if (isNull(args)) {
                break;
            }
            jsArgs[jsArgs.length] = car(args);
            args = cdr(args);
        }
        return getMain(p).apply(undefined, jsArgs);
    };

    var tryc = function (t, c) {
        argCheck(arguments, 2, false);
        try {
            return getMain(env("apply"))(t, list());
        } catch (error) {
            return getMain(env("apply"))(c, list(error));
        }
    };

    var readFile = function (f, clb) {
        argCheck(arguments, 2, false);
        require("fs").readFile(f, function (err, data) {
            if (err) {
                return cerror("readFile", "error while reading file", err);
            }
            return getMain(env("apply"))(clb, list(data.toString()));
        });
        return noPrint;
    };

    var readLine = function (clb, prompt) {
        argCheck(arguments, 2, false);
        var rl = require("readline").createInterface(process.stdin, process.stdout);
        var frl = function (f) {
            return f(rl);
        };
        rl.on("line", function (l) {
            getMain(env("apply"))(clb, list(frl, l));
        });
        return frl;
    };

    var prompt = function (rl) {
        argCheck(arguments, 1, false);
        return rl(function (rrl) {
            rrl.prompt();
            return noPrint;
        });
    };

    var setPrompt = function (rl, p) {
        argCheck(arguments, 2, false);
        return rl(function (rrl) {
            rrl.setPrompt(p);
            return noPrint;
        });
    };

    var isNumber = function (n) {
        argCheck(arguments, 1, false);
        return typeof n === "number" && !Number.isNaN(n);
    };

    var parseNumber = function (s) {
        argCheck(arguments, 1, false);
        var num = parseFloat(s);
        if (isNumber(num)) {
            return num;
        }
        return s;
    };

    var identity = function (x) {
        argCheck(arguments, 1, false);
        return x;
    };

    var mkNumOp = function (initial, single, reduce) {
        return function () {
            var args = Array.prototype.slice.call(arguments);
            if (!args.length) {
                return initial;
            }
            if (args.length === 1) {
                return single(args[0]);
            }
            return args.slice(1).reduce(function (previous, current) {
                return reduce(previous, current);
            }, args[0]);
        };
    };

    var add = mkNumOp(0, identity, function (x, y) { return x + y; });

    var sub = mkNumOp(0, function (x) {
        return 0 - x;
    }, function (x, y) {
        return x - y;
    });

    var mul = mkNumOp(1, identity, function (x, y) { return x * y; });

    var div = mkNumOp(1, function (x) {
        return 1 / x;
    }, function (x, y) {
        return x / y;
    });

    var mod = function (dnd, dvs) {
        argCheck(arguments, 2, false);
        return dnd % dvs;
    };

    var gt = function (left, right) {
        argCheck(arguments, 2, false);
        return left > right;
    };

    var lt = function (left, right) {
        argCheck(arguments, 2, false);
        return left < right;
    };

    var gte = function (left, right) {
        argCheck(arguments, 2, false);
        return left >= right;
    };

    var lte = function (left, right) {
        argCheck(arguments, 2, false);
        return left <= right;
    };

    var isString = function (s) {
        argCheck(arguments, 1, false);
        return typeof s === "string";
    };

    var slen = function (s) {
        argCheck(arguments, 1, false);
        return s.length;
    };

    var sidx = function (s, expression) {
        argCheck(arguments, 2, false);
        var m = s.match(new RegExp(expression), "");
        if (!m) {
            return -1;
        }
        return m.index;
    };

    var charAt = function (s, i) {
        argCheck(arguments, 2, false);
        return s[i];
    };

    var charCodeAt = function (s, i) {
        argCheck(arguments, 2, false);
        return s.charCodeAt(s, i);
    };

    var subs = function (s, offset, count) {
        argCheck(arguments, 3, false);
        if (count < 0) {
            return s.substr(offset);
        }
        return s.substr(offset, count);
    };

    var sreplace = function(s, expression, replace) {
        argCheck(arguments, 3, false);
        return s.replace(new RegExp(expression, "g"), function (s) {
            return env("apply")(replace, list(s, false, false));
        });
    };

    var mkStringBuilder = function () {
        argCheck(arguments, 0, false);
        return {sb: []};
    };

    var isStringBuilder = function (b) {
        argCheck(arguments, 1, false);
        return !!b && b.sb;
    };

    var sbempty = function (b) {
        argCheck(arguments, 1, false);
        for (var i = 0; i < b.sb.length; i++) {
            if (b.sb[i].length) {
                return false;
            }
        }
        return true;
    };

    var sbappend = function (b, s) {
        argCheck(arguments, 2, false);
        if (isStringBuilder(s)) {
            return {
                sb: b.sb.concat(s.sb)
            };
        }
        return {
            sb: b.sb.concat(s)
        }
    };

    var builderToString = function (b) {
        argCheck(arguments, 1, false);
        return b.sb.join("");
    };

    // no-head, once variadic arguments
    var cats = function () {
        var b = mkStringBuilder();
        for (var i = 0; i < arguments.length; i++) {
            b = sbappend(b, arguments[i]);
        }
        return builderToString(b);
    };

    var out = process && process.stdout && function (str) {
        argCheck(arguments, 1, false);
        if (str !== noPrint) {
            process.stdout.write(String(str));
        }
        return noPrint;
    } || console && console.log || noPrint;

    var log = process && process.stderr && function (s) {
        argCheck(arguments, 1, false);
        if (s !== noPrint) {
            process.stderr.write(String(s));
        }
        process.stderr.write("\n");
        return noPrint;
    } || function (s) {
        argCheck(arguments, 1, false);
        if (s !== noPrint) {
            console.log(s);
        } else {
            console.log();
        }
        return noPrint;
    };

    var isError = function (error) {
        argCheck(arguments, 1, false);
        return error instanceof Error;
    };

    var sprintError = function (error) {
        argCheck(arguments, 1, false);
        return error && error.message || "error";
    };

    var sprintStack = function (error) {
        argCheck(arguments, 1, false);
        return error && error.stack || "";
    };

    var now = function () {
        argCheck(arguments, 0, false);
        return {t: new Date()};
    };

    var isTime = function (t) {
        argCheck(arguments, 1, false);
        return !!t && t.t instanceof Date;
    };

    var numberToTime = function (n) {
        argCheck(arguments, 1, false);
        return new Date(n);
    };

    var timeToNumber = function (t) {
        argCheck(arguments, 1, false);
        return t.t.valueOf();
    };

    var timeToString = function (t) {
        argCheck(arguments, 1, false);
        return t.t.toString();
    };

    var exit = function (val) {
        argCheck(arguments, 1, false);
        process.exit(val);
    };

    var argv = function () {
        argCheck(arguments, 0, false);
        return list.apply(undefined, process.argv);
    };

    var makeRegexp = function (expression, flags) {
        argCheck(arguments, 2, false);
        var regexp = new RegExp(expression, flags);
        var wrap = function (text) {
            return vector.apply(undefined, text.match(regexp) || []);
        };
        wrap.main = wrap;
        wrap.body = wrap;
        return wrap;
    };

    var isVector = function (exp) {
        argCheck(arguments, 1, false);
        return !!exp &&
            exp.vector instanceof Array;
    };

    var vector = function () {
        return {vector: Array.prototype.slice.call(arguments)};
    };

    var vlen = function (v) {
        argCheck(arguments, 1, false);
        return v.vector.length;
    };

    var vref = function (v, i) {
        argCheck(arguments, 2, false);
        return v.vector[i];
    };

    var listToVector = function (list, reverse) {
        argCheck(arguments, 2, false);
        var v = vector();
        for (;;) {
            if (isNull(list)) {
                return v;
            }
            v.vector[reverse ? "unshift" : "push"](car(list));
            list = cdr(list);
        }
    };

    var vectorToList = function (v, reverse) {
        argCheck(arguments, 2, false);
        var l = list();
        var len = vlen(v);
        for (var i = 0; i < len; i++) {
            l = cons(vref(reverse ? len - i - 1 : i), l);
        }
        return l;
    };

    var struct = function () {
        var s = makeNameTable();
        for (var i = 0; i < arguments.length; i++) {
            var l = arguments[i];
            if (l.length < 2 ||
                l[1].length < 2 ||
                l[1][1].length !== 0) {
                return cerror("struct", "invalid struct member", l);
            }
            tableDefine(s, l[0], l[1][0]);
        }
        return s;
    };

    var mktail = function (f, args) {
        argCheck(arguments, 2, false);
        var tail = function () {
            return f.apply(undefined, args);
        };
        tail.isTail = true;
        return tail;
    };

    var tailCall = function (f) {
        argCheck(arguments, 1, false);
        var fi = f;
        for (;;) {
            fi = fi.apply();
            if (!fi.isTail) {
                return fi;
            }
        }
    };

    var shared = makeNameTable();
    var share = function (name, member) {
        if (typeof member === "function") {
            member.main = member;
            member.body = member;
        }
        return tableDefine(shared, [name], member);
    };
    share("compiled-procedure?", isCompiledProcedure);
    share("capply", capply);
    share("symbol?", isSymbol);
    share("symbol-name", symbolName);
    share("string->symbol", stringToSymbol);
    share("identity", identity);
    share("null?", isNull);
    share("cons", cons);
    share("pair?", isPair);
    share("car", car);
    share("cdr", cdr);
    share("list", list);
    share("peq?", peq);
    share("try", tryc);
    share("read-file", readFile);
    share("read-line", readLine);
    share("prompt", prompt);
    share("set-prompt", setPrompt);
    share("number?", isNumber);
    share("parse-number", parseNumber);
    share("+", add);
    share("-", sub);
    share("*", mul);
    share("/", div);
    share("%", mod);
    share(">", gt);
    share("<", lt);
    share(">=", gte);
    share("<=", lte);
    share("string?", isString);
    share("number->string", String);
    share("slen", slen);
    share("sidx", sidx);
    share("char-at", charAt);
    share("char-code-at", charCodeAt);
    share("subs", subs);
    share("sreplace", sreplace);
    share("make-string-builder", mkStringBuilder);
    share("string-builder?", isStringBuilder);
    share("sbempty?", sbempty);
    share("sbappend", sbappend);
    share("builder->string", builderToString);
    share("cats", cats);
    share("out", out);
    share("clog", log);
    share("now", now);
    share("time?", isTime);
    share("number->time", numberToTime);
    share("time->number", timeToNumber);
    share("time->string", timeToString);
    share("filter", filter);
    share("table?", isTable);
    share("make-name-table", makeNameTable);
    share("table-has-name?", tableHasName);
    share("table-names", tableNames);
    share("table-lookup", tableLookup);
    share("table-define", tableDefine);
    share("table-set!", tableSet);
    share("table-delete!", tableDelete);
    share("cerror", cerror);
    share("error?", isError);
    share("sprint-error", sprintError);
    share("sprint-stack", sprintStack);
    share("exit", exit);
    share("proc-argv", argv);
    share("make-regexp", makeRegexp);
    share("true", true);
    share("false", false);
    share("no-print", noPrint);
    share("vector?", isVector);
    share("vector", vector);
    share("vlen", vlen);
    share("vref", vref);
    share("list->vector", listToVector);
    share("vector->list", vectorToList);
    share("struct", struct);
    share("struct?", isTable);
    share("mktail", mktail);
    share("tail-call", tailCall);

    // patch
    var extendEnv = function (env, shared) {
        argCheck(arguments, 2, false);
        var current = {
            parent: env,
            shared: shared || makeNameTable()
        };
        var wrap = function () {
            argCheck(arguments, 1, true);
            if (arguments.length === 4 && arguments[3]) {
                return tableNames(current.shared);
            }
            if (arguments.length === 1) {
                if (tableHasName(current.shared, [arguments[0]])) {
                    return tableLookup(current.shared, [arguments[0]]);
                }
                if (!current.parent) {
                    return cerror("extend-env", "unbound variable", arguments[0]);
                }
                return current.parent(arguments[0]);
            }
            if (arguments[1]) {
                return tableDefine(current.shared, [arguments[0]], arguments[2]);
            }
            if (tableHasName(current.shared, [arguments[0]])) {
                return tableSet(current.shared, [arguments[0]], arguments[2]);
            }
            if (!current.parent) {
                return cerror("extend-env", "unbound variable", arguments[0]);
            }
            return current.parent(arguments[0], false, arguments[2]);
        };
        wrap.main = wrap;
        wrap.body = wrap;
        return wrap;
    };

    var isDefined = function (env, name) {
        argCheck(arguments, 2, false);
        try {
            env(name);
            return true;
        } catch (_) {
            return false;
        }
    };

    var head = extendEnv(null, shared);
    var mikkamakka = extendEnv(head, null);
    share("extend-env", extendEnv);
    share("defined?", isDefined);
    share("head", head);
    share("mikkamakka", mikkamakka);
    return mikkamakka;
})();
var $_mktail=env("mktail");var $_tail_45_call=env("tail-call");var $_cerror=env("cerror");var $_list=env("list");/*eval*/ var _eval;_eval=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_eval_45_env.body,[_mikkamakka,_exp]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("eval",true,_eval);/*compound-procedure?*/ var _compound_45_procedure_63_;_compound_45_procedure_63_=(function(){var body=function(_p){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_p,["compound"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("compound-procedure?",true,_compound_45_procedure_63_);/*self-evaluating?*/ var _self_45_evaluating_63_;_self_45_evaluating_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_string_63_.body,[_exp]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_number_63_.main(_exp)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_exp,_no_45_print)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_exp,_false)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_exp,_true)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("self-evaluating?",true,_self_45_evaluating_63_);/*check-quote*/ var _check_45_quote;_check_45_quote=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_not.body,[_peq_63_.main(_len.main(_exp),2)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_not.main(_tagged_45_list_63_.main(_exp,["quote"]))))?$_mktail(_error.body,[["check-quote"],"invalid quotation",["???"]]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("check-quote",true,_check_45_quote);/*assignment?*/ var _assignment_63_;_assignment_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["set!"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("assignment?",true,_assignment_63_);/*check-assignment*/ var _check_45_assignment;_check_45_assignment=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_peq_63_.main(_len.main(_exp),3)))?$_mktail(_error.body,[["check-assignment"],"invalid arity",_exp]):(false!==(_not.main(_symbol_63_.main(_assignment_45_variable.main(_exp))))?$_mktail(_error.body,[["check-assignment"],"invalid variable name",_exp]):_true));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("check-assignment",true,_check_45_assignment);/*assignment-variable*/ var _assignment_45_variable;_assignment_45_variable=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("assignment-variable",true,_assignment_45_variable);/*assignment-value*/ var _assignment_45_value;_assignment_45_value=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("assignment-value",true,_assignment_45_value);/*eval-assignment*/ var _eval_45_assignment;_eval_45_assignment=(function(){var body=function(_env,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_env.body,[_assignment_45_variable.main(_exp),_false,_eval_45_env.main(_env,_assignment_45_value.main(_exp))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("eval-assignment",true,_eval_45_assignment);/*definition?*/ var _definition_63_;_definition_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["define"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("definition?",true,_definition_63_);/*check-definition*/ var _check_45_definition;_check_45_definition=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(__62_.body,[_len.main(_exp),2]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_pair_63_.main(_exp[1][0])]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_peq_63_.body,[_len.main(_exp),3]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_symbol_63_.main(_exp[1][0])))))?$_mktail(_error.body,[["check-definition"],"invalid format",_exp]):(false!==(_not.main(_symbol_63_.main(_definition_45_variable.main(_exp))))?$_mktail(_error.body,[["check-definition"],"invalid variable name",_exp]):_true));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("check-definition",true,_check_45_definition);/*definition-variable*/ var _definition_45_variable;_definition_45_variable=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_symbol_63_.main(_exp[1][0]))?_exp[1][0]:_exp[1][0][0]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("definition-variable",true,_definition_45_variable);/*definition-value*/ var _definition_45_value;_definition_45_value=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_symbol_63_.main(_exp[1][0]))?_exp[1][1][0]:$_mktail(_make_45_lambda.body,[_exp[1][0][1],_exp[1][1]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("definition-value",true,_definition_45_value);/*eval-definition*/ var _eval_45_definition;_eval_45_definition=(function(){var body=function(_env,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_env.body,[_definition_45_variable.main(_exp),_true,_eval_45_env.main(_env,_definition_45_value.main(_exp))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("eval-definition",true,_eval_45_definition);/*if?*/ var _if_63_;_if_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["if"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("if?",true,_if_63_);/*check-if*/ var _check_45_if;_check_45_if=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_peq_63_.main(_len.main(_exp),4)))?$_mktail(_error.body,[["check-if"],"invalid arity",_exp]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("check-if",true,_check_45_if);/*true?*/ var _true_63_;_true_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_not.body,[_peq_63_.main(_exp,_false)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("true?",true,_true_63_);/*if-predicate*/ var _if_45_predicate;_if_45_predicate=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("if-predicate",true,_if_45_predicate);/*if-consequent*/ var _if_45_consequent;_if_45_consequent=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("if-consequent",true,_if_45_consequent);/*if-alternative*/ var _if_45_alternative;_if_45_alternative=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("if-alternative",true,_if_45_alternative);/*eval-if*/ var _eval_45_if;_eval_45_if=(function(){var body=function(_env,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_true_63_.main(_eval_45_env.main(_env,_if_45_predicate.main(_exp))))?$_mktail(_eval_45_env.body,[_env,_if_45_consequent.main(_exp)]):$_mktail(_eval_45_env.body,[_env,_if_45_alternative.main(_exp)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("eval-if",true,_eval_45_if);/*lambda?*/ var _lambda_63_;_lambda_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["lambda"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("lambda?",true,_lambda_63_);/*check-lambda*/ var _check_45_lambda;_check_45_lambda=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_len.main(_exp),3))?$_mktail(_error.body,[["check-lambda"],"invalid arity",_exp]):(false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_not.body,[(function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_pair_63_.body,[_exp[1][0]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_symbol_63_.main(_exp[1][0]))]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_not.main(_null_63_.main(_exp[1][0]))))?$_mktail(_error.body,[["check-lambda"],"invalid argument list",_exp]):_true));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("check-lambda",true,_check_45_lambda);/*make-procedure*/ var _make_45_procedure;_make_45_procedure=(function(){var body=function(_parameters,_body,_env){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return [["compound"],[_parameters,[_body,[_env,[]]]]];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("make-procedure",true,_make_45_procedure);/*lambda-parameters*/ var _lambda_45_parameters;_lambda_45_parameters=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("lambda-parameters",true,_lambda_45_parameters);/*lambda-body*/ var _lambda_45_body;_lambda_45_body=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("lambda-body",true,_lambda_45_body);/*begin?*/ var _begin_63_;_begin_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["begin"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("begin?",true,_begin_63_);/*check-begin*/ var _check_45_begin;_check_45_begin=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_len.main(_exp),2))?$_mktail(_error.body,[["check-begin"],"invalid arity",_exp]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("check-begin",true,_check_45_begin);/*begin-actions*/ var _begin_45_actions;_begin_45_actions=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("begin-actions",true,_begin_45_actions);/*cond?*/ var _cond_63_;_cond_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["cond"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cond?",true,_cond_63_);/*cond-else-clause?*/ var _cond_45_else_45_clause_63_;_cond_45_else_45_clause_63_=(function(){var body=function(_clause){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_eq_63_.body,[_cond_45_predicate.main(_clause),["else"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cond-else-clause?",true,_cond_45_else_45_clause_63_);/*make-begin*/ var _make_45_begin;_make_45_begin=(function(){var body=function(_seq){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return [["begin"],_seq];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("make-begin",true,_make_45_begin);/*sequence->exp*/ var _sequence_45__62_exp;_sequence_45__62_exp=(function(){var body=function(_seq){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_seq))?[]:(false!==(_null_63_.main(_seq[1]))?_seq[0]:$_mktail(_make_45_begin.body,[_seq])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sequence->exp",true,_sequence_45__62_exp);/*cond-actions*/ var _cond_45_actions;_cond_45_actions=(function(){var body=function(_clause){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _clause[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cond-actions",true,_cond_45_actions);/*make-if*/ var _make_45_if;_make_45_if=(function(){var body=function(_predicate,_consequent,_alternative){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return [["if"],[_predicate,[_consequent,[_alternative,[]]]]];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("make-if",true,_make_45_if);/*cond-predicate*/ var _cond_45_predicate;_cond_45_predicate=(function(){var body=function(_clause){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _clause[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cond-predicate",true,_cond_45_predicate);/*expand-clauses*/ var _expand_45_clauses;_expand_45_clauses=(function(){var body=function(_clauses){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_clauses))?["true"]:$_mktail((function(){var body=function(_first,_the_45_rest){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_not.main(_pair_63_.main(_first)))?$_mktail(_error.body,[["expand-clauses"],"invalid syntax",_first]):(false!==(_cond_45_else_45_clause_63_.main(_first))?(false!==(_null_63_.main(_the_45_rest))?$_mktail(_sequence_45__62_exp.body,[_cond_45_actions.main(_first)]):$_mktail(_error.body,[["expand-clauses"],"else clause isn't last",_clauses])):$_mktail(_make_45_if.body,[_cond_45_predicate.main(_first),_sequence_45__62_exp.main(_cond_45_actions.main(_first)),_expand_45_clauses.main(_the_45_rest)])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_clauses[0],_clauses[1]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("expand-clauses",true,_expand_45_clauses);/*cond-clauses*/ var _cond_45_clauses;_cond_45_clauses=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cond-clauses",true,_cond_45_clauses);/*cond->if*/ var _cond_45__62_if;_cond_45__62_if=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_expand_45_clauses.body,[_cond_45_clauses.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cond->if",true,_cond_45__62_if);/*and?*/ var _and_63_;_and_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["and"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("and?",true,_and_63_);/*expand-and*/ var _expand_45_and;_expand_45_and=(function(){var body=function(_exps){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_exps))?["true"]:$_mktail((function(){var body=function(_first,_the_45_rest){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_the_45_rest))?_first:[[["lambda"],[[["predicate"],[]],[[["if"],[["predicate"],[_expand_45_and.main(_the_45_rest),[["predicate"],[]]]]],[]]]],[_first,[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_exps[0],_exps[1]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("expand-and",true,_expand_45_and);/*and-expressions*/ var _and_45_expressions;_and_45_expressions=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("and-expressions",true,_and_45_expressions);/*and->if*/ var _and_45__62_if;_and_45__62_if=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_expand_45_and.body,[_and_45_expressions.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("and->if",true,_and_45__62_if);/*or?*/ var _or_63_;_or_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["or"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("or?",true,_or_63_);/*expand-or*/ var _expand_45_or;_expand_45_or=(function(){var body=function(_exps){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_exps))?["false"]:$_mktail((function(){var body=function(_first,_the_45_rest){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_the_45_rest))?_first:[[["lambda"],[[["predicate"],[]],[[["if"],[["predicate"],[["predicate"],[_expand_45_or.main(_the_45_rest),[]]]]],[]]]],[_first,[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_exps[0],_exps[1]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("expand-or",true,_expand_45_or);/*or-expressions*/ var _or_45_expressions;_or_45_expressions=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("or-expressions",true,_or_45_expressions);/*or->if*/ var _or_45__62_if;_or_45__62_if=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_expand_45_or.body,[_or_45_expressions.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("or->if",true,_or_45__62_if);/*let?*/ var _let_63_;_let_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["let"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("let?",true,_let_63_);/*len*/ var _len;_len=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_l))?0:$_mktail(__43_.body,[1,_len.main(_l[1])]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("len",true,_len);/*check-let*/ var _check_45_let;_check_45_let=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_len.main(_exp),3))?$_mktail(_error.body,[["check-let"],"invalid arity",_exp]):(false!==(_not.main(_pair_63_.main(_exp[1][0])))?$_mktail(_error.body,[["check-let"],"invalid syntax",_exp]):_true));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("check-let",true,_check_45_let);/*make-lambda*/ var _make_45_lambda;_make_45_lambda=(function(){var body=function(_parameters,_body){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return [["lambda"],[_parameters,_body]];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("make-lambda",true,_make_45_lambda);/*let-variables*/ var _let_45_variables;_let_45_variables=(function(){var body=function(_defs){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_map.body,[_car,_defs]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("let-variables",true,_let_45_variables);/*let-defs*/ var _let_45_defs;_let_45_defs=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("let-defs",true,_let_45_defs);/*let-body*/ var _let_45_body;_let_45_body=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("let-body",true,_let_45_body);/*map*/ var _map;_map=(function(){var body=function(_p,_l){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_l))?[]:[_p.main(_l[0]),_map.main(_p,_l[1])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("map",true,_map);/*let-values*/ var _let_45_values;_let_45_values=(function(){var body=function(_defs){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_map.body,[_cadr,_defs]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("let-values",true,_let_45_values);/*let->procedure*/ var _let_45__62_procedure;_let_45__62_procedure=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return [_make_45_lambda.main(_let_45_variables.main(_let_45_defs.main(_exp)),_let_45_body.main(_exp)),_let_45_values.main(_let_45_defs.main(_exp))];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("let->procedure",true,_let_45__62_procedure);/*application?*/ var _application_63_;_application_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_pair_63_.body,[_exp]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("application?",true,_application_63_);/*operator*/ var _operator;_operator=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("operator",true,_operator);/*no-operands?*/ var _no_45_operands_63_;_no_45_operands_63_=(function(){var body=function(_ops){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_null_63_.body,[_ops]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("no-operands?",true,_no_45_operands_63_);/*first-operand*/ var _first_45_operand;_first_45_operand=(function(){var body=function(_ops){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _ops[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("first-operand",true,_first_45_operand);/*rest-operands*/ var _rest_45_operands;_rest_45_operands=(function(){var body=function(_ops){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _ops[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("rest-operands",true,_rest_45_operands);/*list-of-values*/ var _list_45_of_45_values;_list_45_of_45_values=(function(){var body=function(_env,_exps){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_no_45_operands_63_.main(_exps))?[]:[_eval_45_env.main(_env,_first_45_operand.main(_exps)),_list_45_of_45_values.main(_env,_rest_45_operands.main(_exps))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("list-of-values",true,_list_45_of_45_values);/*operands*/ var _operands;_operands=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("operands",true,_operands);/*eval-env*/ var _eval_45_env;_eval_45_env=(function(){var body=function(_env,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_self_45_evaluating_63_.main(_exp))?_exp:(false!==(_symbol_63_.main(_exp))?$_mktail(_env.body,[_exp]):(false!==(_vector_63_.main(_exp))?_exp:(false!==(_struct_63_.main(_exp))?_exp:(false!==(_quote_63_.main(_exp))?(function(){_check_45_quote.main(_exp);return $_mktail(_quote_45_text.body,[_exp]);})():(false!==(_assignment_63_.main(_exp))?(function(){_check_45_assignment.main(_exp);return $_mktail(_eval_45_assignment.body,[_env,_exp]);})():(false!==(_definition_63_.main(_exp))?(function(){_check_45_definition.main(_exp);return $_mktail(_eval_45_definition.body,[_env,_exp]);})():(false!==(_if_63_.main(_exp))?(function(){_check_45_if.main(_exp);return $_mktail(_eval_45_if.body,[_env,_exp]);})():(false!==(_lambda_63_.main(_exp))?(function(){_check_45_lambda.main(_exp);return $_mktail(_make_45_procedure.body,[_lambda_45_parameters.main(_exp),_lambda_45_body.main(_exp),_env]);})():(false!==(_begin_63_.main(_exp))?(function(){_check_45_begin.main(_exp);return $_mktail(_eval_45_sequence.body,[_env,_begin_45_actions.main(_exp)]);})():(false!==(_cond_63_.main(_exp))?$_mktail(_eval_45_env.body,[_env,_cond_45__62_if.main(_exp)]):(false!==(_and_63_.main(_exp))?$_mktail(_eval_45_env.body,[_env,_and_45__62_if.main(_exp)]):(false!==(_or_63_.main(_exp))?$_mktail(_eval_45_env.body,[_env,_or_45__62_if.main(_exp)]):(false!==(_let_63_.main(_exp))?(function(){_check_45_let.main(_exp);return $_mktail(_eval_45_env.body,[_env,_let_45__62_procedure.main(_exp)]);})():(false!==(_application_63_.main(_exp))?$_mktail(_apply.body,[_eval_45_env.main(_env,_operator.main(_exp)),_list_45_of_45_values.main(_env,_operands.main(_exp))]):$_mktail(_error.body,[["eval-env"],"unknown expression type",_exp]))))))))))))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("eval-env",true,_eval_45_env);/*eval-sequence*/ var _eval_45_sequence;_eval_45_sequence=(function(){var body=function(_env,_seq){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_seq))?$_mktail(_error.body,[["eval-sequence"],"unspecified sequence",_seq]):(false!==(_null_63_.main(_seq[1]))?$_mktail(_eval_45_env.body,[_env,_seq[0]]):(function(){_eval_45_env.main(_env,_seq[0]);return $_mktail(_eval_45_sequence.body,[_env,_seq[1]]);})()));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("eval-sequence",true,_eval_45_sequence);/*extend-procedure-environment*/ var _extend_45_procedure_45_environment;_extend_45_procedure_45_environment=(function(){var body=function(_env,_parameters,_values){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}/*define-args*/ var _define_45_args;_define_45_args=(function(){var body=function(_env,_parameters,_values){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_null_63_.main(_parameters))?(false!==(_not.main(_null_63_.main(_values)))?$_mktail(_error.body,[["procedure-environment"],"too many values",[_parameters,[_values,[]]]]):_true):(false!==(_symbol_63_.main(_parameters))?$_mktail(_env.body,[_parameters,_true,_values]):(false!==(_null_63_.main(_values))?$_mktail(_error.body,[["procedure-environment"],"too many parameters",[_parameters,[_values,[]]]]):(function(){_env.main(_parameters[0],_true,_values[0]);return $_mktail(_define_45_args.body,[_env,_parameters[1],_values[1]]);})())));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail((function(){var body=function(_env){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_define_45_args.main(_env,_parameters,_values);return _env;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_extend_45_env.main(_env,_false)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("extend-procedure-environment",true,_extend_45_procedure_45_environment);/*procedure-environment*/ var _procedure_45_environment;_procedure_45_environment=(function(){var body=function(_p){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _p[1][1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("procedure-environment",true,_procedure_45_environment);/*procedure-parameters*/ var _procedure_45_parameters;_procedure_45_parameters=(function(){var body=function(_p){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _p[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("procedure-parameters",true,_procedure_45_parameters);/*procedure-body*/ var _procedure_45_body;_procedure_45_body=(function(){var body=function(_p){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _p[1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("procedure-body",true,_procedure_45_body);/*apply*/ var _apply;_apply=(function(){var body=function(_proc,_args){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_compiled_45_procedure_63_.main(_proc))?$_mktail(_capply.body,[_proc,_args]):(false!==(_compound_45_procedure_63_.main(_proc))?$_mktail(_eval_45_sequence.body,[_extend_45_procedure_45_environment.main(_procedure_45_environment.main(_proc),_procedure_45_parameters.main(_proc),_args),_procedure_45_body.main(_proc)]):$_mktail(_error.body,[["apply"],"unknown procedure type",_proc])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("apply",true,_apply);/*log*/ var _log;_log=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_clog.body,[_sprint.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("log",true,_log);/*print*/ var _print;_print=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_out.body,[_sprint.main(_s)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("print",true,_print);/*quote-eq?*/ var _quote_45_eq_63_;_quote_45_eq_63_=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_eq_63_.body,[_quote_45_text.main(_left),_quote_45_text.main(_right)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[(function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_null_63_.body,[_right[1]]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_null_63_.main(_left[1]))]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_quote_63_.main(_right)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_quote_63_.main(_left)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("quote-eq?",true,_quote_45_eq_63_);/*symbol-eq?*/ var _symbol_45_eq_63_;_symbol_45_eq_63_=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_peq_63_.body,[_symbol_45_name.main(_left),_symbol_45_name.main(_right)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_symbol_63_.main(_right)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_symbol_63_.main(_left)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("symbol-eq?",true,_symbol_45_eq_63_);/*eq?*/ var _eq_63_;_eq_63_=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_peq_63_.body,[_left,_right]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_quote_45_eq_63_.main(_left,_right)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_symbol_45_eq_63_.main(_left,_right)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[(function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_null_63_.body,[_right]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_null_63_.main(_left))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("eq?",true,_eq_63_);/*newline*/ var _newline;_newline=(function(){var body=function(){return $_mktail(_out.body,["\n"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("newline",true,_newline);/*sprint-quoted*/ var _sprint_45_quoted;_sprint_45_quoted=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_sprintq.body,[_exp,_true,_false]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sprint-quoted",true,_sprint_45_quoted);/*error*/ var _error;_error=(function(){var body=function(_where,_what,_arg){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return $_mktail(_cerror.body,[_sprint_45_quoted.main(_where),_what,_sprint.main(_arg)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("error",true,_error);/*not*/ var _not;_not=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_exp,_false))?_true:_false);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("not",true,_not);/*append*/ var _append;_append=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_left))?_right:[_left[0],_append.main(_left[1],_right)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("append",true,_append);/*escape-char?*/ var _escape_45_char_63_;_escape_45_char_63_=(function(){var body=function(_char){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_not.body,[_peq_63_.main(_sescape_45_char.main(_char),_char)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("escape-char?",true,_escape_45_char_63_);/*sescape-symbol-name*/ var _sescape_45_symbol_45_name;_sescape_45_symbol_45_name=(function(){var body=function(_sn){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*find-escape-char*/ var _find_45_escape_45_char;_find_45_escape_45_char=(function(){var body=function(_ss){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_slen.main(_ss),0))?_sn:(false!==(_escape_45_char_63_.main(_subs.main(_ss,0,1)))?$_mktail(_cats.body,["|",_sn,"|"]):$_mktail(_find_45_escape_45_char.body,[_subs.main(_ss,1,-1)])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_find_45_escape_45_char.body,[_sn]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sescape-symbol-name",true,_sescape_45_symbol_45_name);/*tagged-list?*/ var _tagged_45_list_63_;_tagged_45_list_63_=(function(){var body=function(_exp,_tag){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_eq_63_.body,[_exp[0],_tag]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_pair_63_.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("tagged-list?",true,_tagged_45_list_63_);/*quote?*/ var _quote_63_;_quote_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["quote"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("quote?",true,_quote_63_);/*quote-text*/ var _quote_45_text;_quote_45_text=(function(){var body=function(_q){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _q[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("quote-text",true,_quote_45_text);/*sprintq-vector*/ var _sprintq_45_vector;_sprintq_45_vector=(function(){var body=function(_vector){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*sprintq-vector*/ var _sprintq_45_vector;_sprintq_45_vector=(function(){var body=function(_builder,_vector,_ref){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_eq_63_.main(_ref,_vlen.main(_vector)))?_builder:$_mktail(_sprintq_45_vector.body,[_sbappend.main((false!==(__62_.main(_ref,0))?_sbappend.main(_builder," "):_builder),_sprintq.main(_vref.main(_vector,_ref),_true,_false)),_vector,__43_.main(_ref,1)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_builder_45__62_string.body,[_sbappend.main(_sprintq_45_vector.main(_sbappend.main(_make_45_string_45_builder.main(),"#("),_vector,0),")")]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sprintq-vector",true,_sprintq_45_vector);/*sprintq-struct*/ var _sprintq_45_struct;_sprintq_45_struct=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*sprint-struct-members*/ var _sprint_45_struct_45_members;_sprint_45_struct_45_members=(function(){var body=function(_builder,_s,_names,_first_63_){if(arguments.length!==4){return $_cerror("procedure","invalid number of arguments",4);}return (false!==(_null_63_.main(_names))?_builder:$_mktail(_sprint_45_struct_45_members.body,[_sbappend.main((false!==(_first_63_)?_builder:_sbappend.main(_builder," ")),_sprintq.main([_names[0],[_table_45_lookup.main(_s,_names[0]),[]]],_true,_false)),_s,_names[1],_false]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_builder_45__62_string.body,[_sbappend.main(_sprint_45_struct_45_members.main(_sbappend.main(_make_45_string_45_builder.main(),"#s("),_s,_table_45_names.main(_s),_true),")")]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sprintq-struct",true,_sprintq_45_struct);/*sprintq*/ var _sprintq;_sprintq=(function(){var body=function(_exp,_quoted_63_,_in_45_list_63_){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_peq_63_.main(_exp,_false))?"false":(false!==(_peq_63_.main(_exp,_true))?"true":(false!==(_peq_63_.main(_exp,_no_45_print))?"":(false!==(_number_63_.main(_exp))?$_mktail(_number_45__62_string.body,[_exp]):(false!==(_string_63_.main(_exp))?$_mktail(_cats.body,["\"",_sescape.main(_exp),"\""]):(false!==(_symbol_63_.main(_exp))?(false!==(_quoted_63_)?$_mktail(_sescape_45_symbol_45_name.body,[_symbol_45_name.main(_exp)]):$_mktail(_cats.body,["'",_sescape_45_symbol_45_name.main(_symbol_45_name.main(_exp))])):(false!==(_null_63_.main(_exp))?(false!==(_quoted_63_)?"()":"'()"):(false!==(_quote_63_.main(_exp))?$_mktail((function(){var body=function(_text){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_cats.body,["'",_sprintq.main(_text,_true,_false)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_try.main((function(){var body=function(){return $_mktail(_quote_45_text.body,[_exp]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return "???";};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})())]):(false!==(_vector_63_.main(_exp))?$_mktail(_sprintq_45_vector.body,[_exp]):(false!==(_pair_63_.main(_exp))?$_mktail(_cats.body,[(false!==(_not.main(_quoted_63_))?"'(":(false!==(_not.main(_in_45_list_63_))?"(":"")),(false!==(_in_45_list_63_)?" ":""),_sprintq.main(_exp[0],_true,_false),(false!==(_null_63_.main(_exp[1]))?")":(false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_not.body,[_quote_63_.main(_exp[1])]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_pair_63_.main(_exp[1])))?_sprintq.main(_exp[1],_true,_true):_cats.main(" . ",_sprintq.main(_exp[1],_true,_true),")")))]):(false!==(_table_63_.main(_exp))?$_mktail(_sprintq_45_struct.body,[_exp]):(false!==(_error_63_.main(_exp))?$_mktail(_sprint_45_error.body,[_exp]):"unknown type"))))))))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sprintq",true,_sprintq);/*sprint*/ var _sprint;_sprint=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_sprintq.body,[_exp,_false,_false]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sprint",true,_sprint);/*reverse*/ var _reverse;_reverse=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_l))?[]:$_mktail(_append.body,[_reverse.main(_l[1]),[_l[0],[]]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("reverse",true,_reverse);/*sescaped-char*/ var _sescaped_45_char;_sescaped_45_char=(function(){var body=function(_char_45_symbol){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_char_45_symbol,"b"))?"\b":(false!==(_peq_63_.main(_char_45_symbol,"t"))?"\t":(false!==(_peq_63_.main(_char_45_symbol,"n"))?"\n":(false!==(_peq_63_.main(_char_45_symbol,"v"))?"\v":(false!==(_peq_63_.main(_char_45_symbol,"f"))?"\f":(false!==(_peq_63_.main(_char_45_symbol,"r"))?"\r":_char_45_symbol))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sescaped-char",true,_sescaped_45_char);/*sunescape*/ var _sunescape;_sunescape=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*sunescapes*/ var _sunescapes;_sunescapes=(function(){var body=function(_ss,_ps,_escaped){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_peq_63_.main(_slen.main(_ss),0))?(false!==(_escaped)?$_mktail(_error.body,[["sunescape"],"invalid escape sequence",_s]):_ps):(false!==(_escaped)?$_mktail(_sunescapes.body,[_subs.main(_ss,1,-1),_cats.main(_ps,_sescaped_45_char.main(_subs.main(_ss,0,1))),_false]):(false!==(_peq_63_.main(_subs.main(_ss,0,1),"\\"))?$_mktail(_sunescapes.body,[_subs.main(_ss,1,-1),_ps,_true]):$_mktail(_sunescapes.body,[_subs.main(_ss,1,-1),_cats.main(_ps,_subs.main(_ss,0,1)),_false]))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_sunescapes.body,[_s,"",_false]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sunescape",true,_sunescape);/*display*/ var _display;_display=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_out.body,[_sunescape.main(_sprint.main(_s))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("display",true,_display);/*sescape-char*/ var _sescape_45_char;_sescape_45_char=(function(){var body=function(_char){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_char,"\b"))?"\\b":(false!==(_peq_63_.main(_char,"\t"))?"\\t":(false!==(_peq_63_.main(_char,"\n"))?"\\n":(false!==(_peq_63_.main(_char,"\v"))?"\\v":(false!==(_peq_63_.main(_char,"\f"))?"\\f":(false!==(_peq_63_.main(_char,"\r"))?"\\r":(false!==(_peq_63_.main(_char,"\""))?"\\\"":(false!==(_peq_63_.main(_char,"\\"))?"\\\\":_char))))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sescape-char",true,_sescape_45_char);/*sescape*/ var _sescape;_sescape=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*sescapes*/ var _sescapes;_sescapes=(function(){var body=function(_ss,_ps){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_peq_63_.main(_slen.main(_ss),0))?_ps:$_mktail(_sescapes.body,[_subs.main(_ss,1,-1),_cats.main(_ps,_sescape_45_char.main(_subs.main(_ss,0,1)))]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_sescapes.body,[_s,""]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("sescape",true,_sescape);/*caar*/ var _caar;_caar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caar",true,_caar);/*cadr*/ var _cadr;_cadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cadr",true,_cadr);/*cdar*/ var _cdar;_cdar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdar",true,_cdar);/*cddr*/ var _cddr;_cddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cddr",true,_cddr);/*caaar*/ var _caaar;_caaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caaar",true,_caaar);/*caadr*/ var _caadr;_caadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caadr",true,_caadr);/*cadar*/ var _cadar;_cadar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cadar",true,_cadar);/*cdaar*/ var _cdaar;_cdaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdaar",true,_cdaar);/*caddr*/ var _caddr;_caddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caddr",true,_caddr);/*cdadr*/ var _cdadr;_cdadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdadr",true,_cdadr);/*cddar*/ var _cddar;_cddar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cddar",true,_cddar);/*cdddr*/ var _cdddr;_cdddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdddr",true,_cdddr);/*caaaar*/ var _caaaar;_caaaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caaaar",true,_caaaar);/*caaadr*/ var _caaadr;_caaadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caaadr",true,_caaadr);/*caadar*/ var _caadar;_caadar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caadar",true,_caadar);/*cadaar*/ var _cadaar;_cadaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cadaar",true,_cadaar);/*cdaaar*/ var _cdaaar;_cdaaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdaaar",true,_cdaaar);/*caaddr*/ var _caaddr;_caaddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caaddr",true,_caaddr);/*cadadr*/ var _cadadr;_cadadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cadadr",true,_cadadr);/*cdaadr*/ var _cdaadr;_cdaadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdaadr",true,_cdaadr);/*caddar*/ var _caddar;_caddar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("caddar",true,_caddar);/*cdadar*/ var _cdadar;_cdadar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdadar",true,_cdadar);/*cddaar*/ var _cddaar;_cddaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cddaar",true,_cddaar);/*cadddr*/ var _cadddr;_cadddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cadddr",true,_cadddr);/*cdaddr*/ var _cdaddr;_cdaddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdaddr",true,_cdaddr);/*cddadr*/ var _cddadr;_cddadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cddadr",true,_cddadr);/*cdddar*/ var _cdddar;_cdddar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cdddar",true,_cdddar);/*cddddr*/ var _cddddr;_cddddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();env("cddddr",true,_cddddr);var _mikkamakka=env("mikkamakka");var _head=env("head");var _defined_63_=env("defined?");var _extend_45_env=env("extend-env");var _tail_45_call=env("tail-call");var _mktail=env("mktail");var _struct_63_=env("struct?");var _struct=env("struct");var _vector_45__62_list=env("vector->list");var _list_45__62_vector=env("list->vector");var _vref=env("vref");var _vlen=env("vlen");var _vector=env("vector");var _vector_63_=env("vector?");var _no_45_print=env("no-print");var _false=env("false");var _true=env("true");var _make_45_regexp=env("make-regexp");var _proc_45_argv=env("proc-argv");var _exit=env("exit");var _sprint_45_stack=env("sprint-stack");var _sprint_45_error=env("sprint-error");var _error_63_=env("error?");var _cerror=env("cerror");var _table_45_delete_33_=env("table-delete!");var _table_45_set_33_=env("table-set!");var _table_45_define=env("table-define");var _table_45_lookup=env("table-lookup");var _table_45_names=env("table-names");var _table_45_has_45_name_63_=env("table-has-name?");var _make_45_name_45_table=env("make-name-table");var _table_63_=env("table?");var _filter=env("filter");var _time_45__62_string=env("time->string");var _time_45__62_number=env("time->number");var _number_45__62_time=env("number->time");var _time_63_=env("time?");var _now=env("now");var _clog=env("clog");var _out=env("out");var _cats=env("cats");var _builder_45__62_string=env("builder->string");var _sbappend=env("sbappend");var _sbempty_63_=env("sbempty?");var _string_45_builder_63_=env("string-builder?");var _make_45_string_45_builder=env("make-string-builder");var _sreplace=env("sreplace");var _subs=env("subs");var _char_45_code_45_at=env("char-code-at");var _char_45_at=env("char-at");var _sidx=env("sidx");var _slen=env("slen");var _number_45__62_string=env("number->string");var _string_63_=env("string?");var __60__61_=env("<=");var __62__61_=env(">=");var __60_=env("<");var __62_=env(">");var __37_=env("%");var __47_=env("/");var __42_=env("*");var __45_=env("-");var __43_=env("+");var _parse_45_number=env("parse-number");var _number_63_=env("number?");var _set_45_prompt=env("set-prompt");var _prompt=env("prompt");var _read_45_line=env("read-line");var _read_45_file=env("read-file");var _try=env("try");var _peq_63_=env("peq?");var _list=env("list");var _cdr=env("cdr");var _car=env("car");var _pair_63_=env("pair?");var _cons=env("cons");var _null_63_=env("null?");var _identity=env("identity");var _string_45__62_symbol=env("string->symbol");var _symbol_45_name=env("symbol-name");var _symbol_63_=env("symbol?");var _capply=env("capply");var _compiled_45_procedure_63_=env("compiled-procedure?");/*shared-precompiled*/ var _shared_45_precompiled;_shared_45_precompiled=[];_shared_45_precompiled=[[["define"],[[["cddddr"],[["l"],[]]],[[["cdr"],[[["cdr"],[[["cdr"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdddar"],[["l"],[]]],[[["cdr"],[[["cdr"],[[["cdr"],[[["car"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cddadr"],[["l"],[]]],[[["cdr"],[[["cdr"],[[["car"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdaddr"],[["l"],[]]],[[["cdr"],[[["car"],[[["cdr"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cadddr"],[["l"],[]]],[[["car"],[[["cdr"],[[["cdr"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cddaar"],[["l"],[]]],[[["cdr"],[[["cdr"],[[["car"],[[["car"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdadar"],[["l"],[]]],[[["cdr"],[[["car"],[[["cdr"],[[["car"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caddar"],[["l"],[]]],[[["car"],[[["cdr"],[[["cdr"],[[["car"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdaadr"],[["l"],[]]],[[["cdr"],[[["car"],[[["car"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cadadr"],[["l"],[]]],[[["car"],[[["cdr"],[[["car"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caaddr"],[["l"],[]]],[[["car"],[[["car"],[[["cdr"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdaaar"],[["l"],[]]],[[["cdr"],[[["car"],[[["car"],[[["car"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cadaar"],[["l"],[]]],[[["car"],[[["cdr"],[[["car"],[[["car"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caadar"],[["l"],[]]],[[["car"],[[["car"],[[["cdr"],[[["car"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caaadr"],[["l"],[]]],[[["car"],[[["car"],[[["car"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caaaar"],[["l"],[]]],[[["car"],[[["car"],[[["car"],[[["car"],[["l"],[]]],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdddr"],[["l"],[]]],[[["cdr"],[[["cdr"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cddar"],[["l"],[]]],[[["cdr"],[[["cdr"],[[["car"],[["l"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdadr"],[["l"],[]]],[[["cdr"],[[["car"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caddr"],[["l"],[]]],[[["car"],[[["cdr"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdaar"],[["l"],[]]],[[["cdr"],[[["car"],[[["car"],[["l"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cadar"],[["l"],[]]],[[["car"],[[["cdr"],[[["car"],[["l"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caadr"],[["l"],[]]],[[["car"],[[["car"],[[["cdr"],[["l"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caaar"],[["l"],[]]],[[["car"],[[["car"],[[["car"],[["l"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cddr"],[["l"],[]]],[[["cdr"],[[["cdr"],[["l"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cdar"],[["l"],[]]],[[["cdr"],[[["car"],[["l"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cadr"],[["l"],[]]],[[["car"],[[["cdr"],[["l"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["caar"],[["l"],[]]],[[["car"],[[["car"],[["l"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sescape"],[["s"],[]]],[[["define"],[[["sescapes"],[["ss"],[["ps"],[]]]],[[["if"],[[["peq?"],[[["slen"],[["ss"],[]]],[0,[]]]],[["ps"],[[["sescapes"],[[["subs"],[["ss"],[1,[-1,[]]]]],[[["cats"],[["ps"],[[["sescape-char"],[[["subs"],[["ss"],[0,[1,[]]]]],[]]],[]]]],[]]]],[]]]]],[]]]],[[["sescapes"],[["s"],["",[]]]],[]]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sescape-char"],[["char"],[]]],[[["cond"],[[[["peq?"],[["char"],["\b",[]]]],["\\b",[]]],[[[["peq?"],[["char"],["\t",[]]]],["\\t",[]]],[[[["peq?"],[["char"],["\n",[]]]],["\\n",[]]],[[[["peq?"],[["char"],["\v",[]]]],["\\v",[]]],[[[["peq?"],[["char"],["\f",[]]]],["\\f",[]]],[[[["peq?"],[["char"],["\r",[]]]],["\\r",[]]],[[[["peq?"],[["char"],["\"",[]]]],["\\\"",[]]],[[[["peq?"],[["char"],["\\",[]]]],["\\\\",[]]],[[["else"],[["char"],[]]],[]]]]]]]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["display"],[["s"],[]]],[[["out"],[[["sunescape"],[[["sprint"],[["s"],[]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sunescape"],[["s"],[]]],[[["define"],[[["sunescapes"],[["ss"],[["ps"],[["escaped"],[]]]]],[[["cond"],[[[["peq?"],[[["slen"],[["ss"],[]]],[0,[]]]],[[["if"],[["escaped"],[[["error"],[[["quote"],[["sunescape"],[]]],["invalid escape sequence",[["s"],[]]]]],[["ps"],[]]]]],[]]],[[["escaped"],[[["sunescapes"],[[["subs"],[["ss"],[1,[-1,[]]]]],[[["cats"],[["ps"],[[["sescaped-char"],[[["subs"],[["ss"],[0,[1,[]]]]],[]]],[]]]],[["false"],[]]]]],[]]],[[[["peq?"],[[["subs"],[["ss"],[0,[1,[]]]]],["\\",[]]]],[[["sunescapes"],[[["subs"],[["ss"],[1,[-1,[]]]]],[["ps"],[["true"],[]]]]],[]]],[[["else"],[[["sunescapes"],[[["subs"],[["ss"],[1,[-1,[]]]]],[[["cats"],[["ps"],[[["subs"],[["ss"],[0,[1,[]]]]],[]]]],[["false"],[]]]]],[]]],[]]]]]],[]]]],[[["sunescapes"],[["s"],["",[["false"],[]]]]],[]]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sescaped-char"],[["char-symbol"],[]]],[[["cond"],[[[["peq?"],[["char-symbol"],["b",[]]]],["\b",[]]],[[[["peq?"],[["char-symbol"],["t",[]]]],["\t",[]]],[[[["peq?"],[["char-symbol"],["n",[]]]],["\n",[]]],[[[["peq?"],[["char-symbol"],["v",[]]]],["\v",[]]],[[[["peq?"],[["char-symbol"],["f",[]]]],["\f",[]]],[[[["peq?"],[["char-symbol"],["r",[]]]],["\r",[]]],[[["else"],[["char-symbol"],[]]],[]]]]]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["reverse"],[["l"],[]]],[[["if"],[[["null?"],[["l"],[]]],[[["quote"],[[],[]]],[[["append"],[[["reverse"],[[["cdr"],[["l"],[]]],[]]],[[["list"],[[["car"],[["l"],[]]],[]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sprint"],[["exp"],[]]],[[["sprintq"],[["exp"],[["false"],[["false"],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sprintq"],[["exp"],[["quoted?"],[["in-list?"],[]]]]],[[["cond"],[[[["peq?"],[["exp"],[["false"],[]]]],["false",[]]],[[[["peq?"],[["exp"],[["true"],[]]]],["true",[]]],[[[["peq?"],[["exp"],[["no-print"],[]]]],["",[]]],[[[["number?"],[["exp"],[]]],[[["number->string"],[["exp"],[]]],[]]],[[[["string?"],[["exp"],[]]],[[["cats"],["\"",[[["sescape"],[["exp"],[]]],["\"",[]]]]],[]]],[[[["symbol?"],[["exp"],[]]],[[["if"],[["quoted?"],[[["sescape-symbol-name"],[[["symbol-name"],[["exp"],[]]],[]]],[[["cats"],["'",[[["sescape-symbol-name"],[[["symbol-name"],[["exp"],[]]],[]]],[]]]],[]]]]],[]]],[[[["null?"],[["exp"],[]]],[[["if"],[["quoted?"],["()",["'()",[]]]]],[]]],[[[["quote?"],[["exp"],[]]],[[["let"],[[[["text"],[[["try"],[[["lambda"],[[],[[["quote-text"],[["exp"],[]]],[]]]],[[["lambda"],[[["_"],[]],["???",[]]]],[]]]],[]]],[]],[[["cats"],["'",[[["sprintq"],[["text"],[["true"],[["false"],[]]]]],[]]]],[]]]],[]]],[[[["vector?"],[["exp"],[]]],[[["sprintq-vector"],[["exp"],[]]],[]]],[[[["pair?"],[["exp"],[]]],[[["cats"],[[["cond"],[[[["not"],[["quoted?"],[]]],["'(",[]]],[[[["not"],[["in-list?"],[]]],["(",[]]],[[["else"],["",[]]],[]]]]],[[["cond"],[[["in-list?"],[" ",[]]],[[["else"],["",[]]],[]]]],[[["sprintq"],[[["car"],[["exp"],[]]],[["true"],[["false"],[]]]]],[[["cond"],[[[["null?"],[[["cdr"],[["exp"],[]]],[]]],[")",[]]],[[[["and"],[[["pair?"],[[["cdr"],[["exp"],[]]],[]]],[[["not"],[[["quote?"],[[["cdr"],[["exp"],[]]],[]]],[]]],[]]]],[[["sprintq"],[[["cdr"],[["exp"],[]]],[["true"],[["true"],[]]]]],[]]],[[["else"],[[["cats"],[" . ",[[["sprintq"],[[["cdr"],[["exp"],[]]],[["true"],[["true"],[]]]]],[")",[]]]]],[]]],[]]]]],[]]]]]],[]]],[[[["table?"],[["exp"],[]]],[[["sprintq-struct"],[["exp"],[]]],[]]],[[[["error?"],[["exp"],[]]],[[["sprint-error"],[["exp"],[]]],[]]],[[["else"],["unknown type",[]]],[]]]]]]]]]]]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sprintq-struct"],[["s"],[]]],[[["define"],[[["sprint-struct-members"],[["builder"],[["s"],[["names"],[["first?"],[]]]]]],[[["cond"],[[[["null?"],[["names"],[]]],[["builder"],[]]],[[["else"],[[["sprint-struct-members"],[[["sbappend"],[[["if"],[["first?"],[["builder"],[[["sbappend"],[["builder"],[" ",[]]]],[]]]]],[[["sprintq"],[[["list"],[[["car"],[["names"],[]]],[[["table-lookup"],[["s"],[[["car"],[["names"],[]]],[]]]],[]]]],[["true"],[["false"],[]]]]],[]]]],[["s"],[[["cdr"],[["names"],[]]],[["false"],[]]]]]],[]]],[]]]],[]]]],[[["builder->string"],[[["sbappend"],[[["sprint-struct-members"],[[["sbappend"],[[["make-string-builder"],[]],["#s(",[]]]],[["s"],[[["table-names"],[["s"],[]]],[["true"],[]]]]]],[")",[]]]],[]]],[]]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sprintq-vector"],[["vector"],[]]],[[["define"],[[["sprintq-vector"],[["builder"],[["vector"],[["ref"],[]]]]],[[["cond"],[[[["eq?"],[["ref"],[[["vlen"],[["vector"],[]]],[]]]],[["builder"],[]]],[[["else"],[[["sprintq-vector"],[[["sbappend"],[[["if"],[[[">"],[["ref"],[0,[]]]],[[["sbappend"],[["builder"],[" ",[]]]],[["builder"],[]]]]],[[["sprintq"],[[["vref"],[["vector"],[["ref"],[]]]],[["true"],[["false"],[]]]]],[]]]],[["vector"],[[["+"],[["ref"],[1,[]]]],[]]]]],[]]],[]]]],[]]]],[[["builder->string"],[[["sbappend"],[[["sprintq-vector"],[[["sbappend"],[[["make-string-builder"],[]],["#(",[]]]],[["vector"],[0,[]]]]],[")",[]]]],[]]],[]]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["quote-text"],[["q"],[]]],[[["cadr"],[["q"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["quote?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["quote"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["tagged-list?"],[["exp"],[["tag"],[]]]],[[["and"],[[["pair?"],[["exp"],[]]],[[["eq?"],[[["car"],[["exp"],[]]],[["tag"],[]]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sescape-symbol-name"],[["sn"],[]]],[[["define"],[[["find-escape-char"],[["ss"],[]]],[[["cond"],[[[["peq?"],[[["slen"],[["ss"],[]]],[0,[]]]],[["sn"],[]]],[[[["escape-char?"],[[["subs"],[["ss"],[0,[1,[]]]]],[]]],[[["cats"],["|",[["sn"],["|",[]]]]],[]]],[[["else"],[[["find-escape-char"],[[["subs"],[["ss"],[1,[-1,[]]]]],[]]],[]]],[]]]]],[]]]],[[["find-escape-char"],[["sn"],[]]],[]]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["escape-char?"],[["char"],[]]],[[["not"],[[["peq?"],[[["sescape-char"],[["char"],[]]],[["char"],[]]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["append"],[["left"],[["right"],[]]]],[[["if"],[[["null?"],[["left"],[]]],[["right"],[[["cons"],[[["car"],[["left"],[]]],[[["append"],[[["cdr"],[["left"],[]]],[["right"],[]]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["not"],[["exp"],[]]],[[["if"],[[["peq?"],[["exp"],[["false"],[]]]],[["true"],[["false"],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["error"],[["where"],[["what"],[["arg"],[]]]]],[[["cerror"],[[["sprint-quoted"],[["where"],[]]],[["what"],[[["sprint"],[["arg"],[]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sprint-quoted"],[["exp"],[]]],[[["sprintq"],[["exp"],[["true"],[["false"],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["newline"],[]],[[["out"],["\n",[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["eq?"],[["left"],[["right"],[]]]],[[["or"],[[["and"],[[["null?"],[["left"],[]]],[[["null?"],[["right"],[]]],[]]]],[[["symbol-eq?"],[["left"],[["right"],[]]]],[[["quote-eq?"],[["left"],[["right"],[]]]],[[["peq?"],[["left"],[["right"],[]]]],[]]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["symbol-eq?"],[["left"],[["right"],[]]]],[[["and"],[[["symbol?"],[["left"],[]]],[[["symbol?"],[["right"],[]]],[[["peq?"],[[["symbol-name"],[["left"],[]]],[[["symbol-name"],[["right"],[]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["quote-eq?"],[["left"],[["right"],[]]]],[[["and"],[[["quote?"],[["left"],[]]],[[["quote?"],[["right"],[]]],[[["or"],[[["and"],[[["null?"],[[["cdr"],[["left"],[]]],[]]],[[["null?"],[[["cdr"],[["right"],[]]],[]]],[]]]],[[["eq?"],[[["quote-text"],[["left"],[]]],[[["quote-text"],[["right"],[]]],[]]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["print"],[["s"],[]]],[[["out"],[[["sprint"],[["s"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["log"],[["exp"],[]]],[[["clog"],[[["sprint"],[["exp"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["apply"],[["proc"],[["args"],[]]]],[[["cond"],[[[["compiled-procedure?"],[["proc"],[]]],[[["capply"],[["proc"],[["args"],[]]]],[]]],[[[["compound-procedure?"],[["proc"],[]]],[[["eval-sequence"],[[["extend-procedure-environment"],[[["procedure-environment"],[["proc"],[]]],[[["procedure-parameters"],[["proc"],[]]],[["args"],[]]]]],[[["procedure-body"],[["proc"],[]]],[]]]],[]]],[[["else"],[[["error"],[[["quote"],[["apply"],[]]],["unknown procedure type",[["proc"],[]]]]],[]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["procedure-body"],[["p"],[]]],[[["caddr"],[["p"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["procedure-parameters"],[["p"],[]]],[[["cadr"],[["p"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["procedure-environment"],[["p"],[]]],[[["cadddr"],[["p"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["extend-procedure-environment"],[["env"],[["parameters"],[["values"],[]]]]],[[["define"],[[["define-args"],[["env"],[["parameters"],[["values"],[]]]]],[[["cond"],[[[["null?"],[["parameters"],[]]],[[["cond"],[[[["not"],[[["null?"],[["values"],[]]],[]]],[[["error"],[[["quote"],[["procedure-environment"],[]]],["too many values",[[["list"],[["parameters"],[["values"],[]]]],[]]]]],[]]],[]]],[]]],[[[["symbol?"],[["parameters"],[]]],[[["env"],[["parameters"],[["true"],[["values"],[]]]]],[]]],[[[["null?"],[["values"],[]]],[[["error"],[[["quote"],[["procedure-environment"],[]]],["too many parameters",[[["list"],[["parameters"],[["values"],[]]]],[]]]]],[]]],[[["else"],[[["env"],[[["car"],[["parameters"],[]]],[["true"],[[["car"],[["values"],[]]],[]]]]],[[["define-args"],[["env"],[[["cdr"],[["parameters"],[]]],[[["cdr"],[["values"],[]]],[]]]]],[]]]],[]]]]]],[]]]],[[["let"],[[[["env"],[[["extend-env"],[["env"],[["false"],[]]]],[]]],[]],[[["define-args"],[["env"],[["parameters"],[["values"],[]]]]],[["env"],[]]]]],[]]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["eval-sequence"],[["env"],[["seq"],[]]]],[[["cond"],[[[["null?"],[["seq"],[]]],[[["error"],[[["quote"],[["eval-sequence"],[]]],["unspecified sequence",[["seq"],[]]]]],[]]],[[[["null?"],[[["cdr"],[["seq"],[]]],[]]],[[["eval-env"],[["env"],[[["car"],[["seq"],[]]],[]]]],[]]],[[["else"],[[["eval-env"],[["env"],[[["car"],[["seq"],[]]],[]]]],[[["eval-sequence"],[["env"],[[["cdr"],[["seq"],[]]],[]]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["eval-env"],[["env"],[["exp"],[]]]],[[["cond"],[[[["self-evaluating?"],[["exp"],[]]],[["exp"],[]]],[[[["symbol?"],[["exp"],[]]],[[["env"],[["exp"],[]]],[]]],[[[["vector?"],[["exp"],[]]],[["exp"],[]]],[[[["struct?"],[["exp"],[]]],[["exp"],[]]],[[[["quote?"],[["exp"],[]]],[[["check-quote"],[["exp"],[]]],[[["quote-text"],[["exp"],[]]],[]]]],[[[["assignment?"],[["exp"],[]]],[[["check-assignment"],[["exp"],[]]],[[["eval-assignment"],[["env"],[["exp"],[]]]],[]]]],[[[["definition?"],[["exp"],[]]],[[["check-definition"],[["exp"],[]]],[[["eval-definition"],[["env"],[["exp"],[]]]],[]]]],[[[["if?"],[["exp"],[]]],[[["check-if"],[["exp"],[]]],[[["eval-if"],[["env"],[["exp"],[]]]],[]]]],[[[["lambda?"],[["exp"],[]]],[[["check-lambda"],[["exp"],[]]],[[["make-procedure"],[[["lambda-parameters"],[["exp"],[]]],[[["lambda-body"],[["exp"],[]]],[["env"],[]]]]],[]]]],[[[["begin?"],[["exp"],[]]],[[["check-begin"],[["exp"],[]]],[[["eval-sequence"],[["env"],[[["begin-actions"],[["exp"],[]]],[]]]],[]]]],[[[["cond?"],[["exp"],[]]],[[["eval-env"],[["env"],[[["cond->if"],[["exp"],[]]],[]]]],[]]],[[[["and?"],[["exp"],[]]],[[["eval-env"],[["env"],[[["and->if"],[["exp"],[]]],[]]]],[]]],[[[["or?"],[["exp"],[]]],[[["eval-env"],[["env"],[[["or->if"],[["exp"],[]]],[]]]],[]]],[[[["let?"],[["exp"],[]]],[[["check-let"],[["exp"],[]]],[[["eval-env"],[["env"],[[["let->procedure"],[["exp"],[]]],[]]]],[]]]],[[[["application?"],[["exp"],[]]],[[["apply"],[[["eval-env"],[["env"],[[["operator"],[["exp"],[]]],[]]]],[[["list-of-values"],[["env"],[[["operands"],[["exp"],[]]],[]]]],[]]]],[]]],[[["else"],[[["error"],[[["quote"],[["eval-env"],[]]],["unknown expression type",[["exp"],[]]]]],[]]],[]]]]]]]]]]]]]]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["operands"],[["exp"],[]]],[[["cdr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["list-of-values"],[["env"],[["exps"],[]]]],[[["if"],[[["no-operands?"],[["exps"],[]]],[[["quote"],[[],[]]],[[["cons"],[[["eval-env"],[["env"],[[["first-operand"],[["exps"],[]]],[]]]],[[["list-of-values"],[["env"],[[["rest-operands"],[["exps"],[]]],[]]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["rest-operands"],[["ops"],[]]],[[["cdr"],[["ops"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["first-operand"],[["ops"],[]]],[[["car"],[["ops"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["no-operands?"],[["ops"],[]]],[[["null?"],[["ops"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["operator"],[["exp"],[]]],[[["car"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["application?"],[["exp"],[]]],[[["pair?"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["let->procedure"],[["exp"],[]]],[[["cons"],[[["make-lambda"],[[["let-variables"],[[["let-defs"],[["exp"],[]]],[]]],[[["let-body"],[["exp"],[]]],[]]]],[[["let-values"],[[["let-defs"],[["exp"],[]]],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["let-values"],[["defs"],[]]],[[["map"],[["cadr"],[["defs"],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["map"],[["p"],[["l"],[]]]],[[["if"],[[["null?"],[["l"],[]]],[[["quote"],[[],[]]],[[["cons"],[[["p"],[[["car"],[["l"],[]]],[]]],[[["map"],[["p"],[[["cdr"],[["l"],[]]],[]]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["let-body"],[["exp"],[]]],[[["cddr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["let-defs"],[["exp"],[]]],[[["cadr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["let-variables"],[["defs"],[]]],[[["map"],[["car"],[["defs"],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["make-lambda"],[["parameters"],[["body"],[]]]],[[["cons"],[[["quote"],[["lambda"],[]]],[[["cons"],[["parameters"],[["body"],[]]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["check-let"],[["exp"],[]]],[[["cond"],[[[["<"],[[["len"],[["exp"],[]]],[3,[]]]],[[["error"],[[["quote"],[["check-let"],[]]],["invalid arity",[["exp"],[]]]]],[]]],[[[["not"],[[["pair?"],[[["cadr"],[["exp"],[]]],[]]],[]]],[[["error"],[[["quote"],[["check-let"],[]]],["invalid syntax",[["exp"],[]]]]],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["len"],[["l"],[]]],[[["if"],[[["null?"],[["l"],[]]],[0,[[["+"],[1,[[["len"],[[["cdr"],[["l"],[]]],[]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["let?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["let"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["or->if"],[["exp"],[]]],[[["expand-or"],[[["or-expressions"],[["exp"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["or-expressions"],[["exp"],[]]],[[["cdr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["expand-or"],[["exps"],[]]],[[["if"],[[["null?"],[["exps"],[]]],[[["quote"],[["false"],[]]],[[["let"],[[[["first"],[[["car"],[["exps"],[]]],[]]],[[["the-rest"],[[["cdr"],[["exps"],[]]],[]]],[]]],[[["if"],[[["null?"],[["the-rest"],[]]],[["first"],[[["list"],[[["list"],[[["quote"],[["lambda"],[]]],[[["quote"],[[["predicate"],[]],[]]],[[["list"],[[["quote"],[["if"],[]]],[[["quote"],[["predicate"],[]]],[[["quote"],[["predicate"],[]]],[[["expand-or"],[["the-rest"],[]]],[]]]]]],[]]]]],[["first"],[]]]],[]]]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["or?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["or"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["and->if"],[["exp"],[]]],[[["expand-and"],[[["and-expressions"],[["exp"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["and-expressions"],[["exp"],[]]],[[["cdr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["expand-and"],[["exps"],[]]],[[["if"],[[["null?"],[["exps"],[]]],[[["quote"],[["true"],[]]],[[["let"],[[[["first"],[[["car"],[["exps"],[]]],[]]],[[["the-rest"],[[["cdr"],[["exps"],[]]],[]]],[]]],[[["if"],[[["null?"],[["the-rest"],[]]],[["first"],[[["list"],[[["list"],[[["quote"],[["lambda"],[]]],[[["quote"],[[["predicate"],[]],[]]],[[["list"],[[["quote"],[["if"],[]]],[[["quote"],[["predicate"],[]]],[[["expand-and"],[["the-rest"],[]]],[[["quote"],[["predicate"],[]]],[]]]]]],[]]]]],[["first"],[]]]],[]]]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["and?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["and"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cond->if"],[["exp"],[]]],[[["expand-clauses"],[[["cond-clauses"],[["exp"],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cond-clauses"],[["exp"],[]]],[[["cdr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["expand-clauses"],[["clauses"],[]]],[[["if"],[[["null?"],[["clauses"],[]]],[[["quote"],[["true"],[]]],[[["let"],[[[["first"],[[["car"],[["clauses"],[]]],[]]],[[["the-rest"],[[["cdr"],[["clauses"],[]]],[]]],[]]],[[["cond"],[[[["not"],[[["pair?"],[["first"],[]]],[]]],[[["error"],[[["quote"],[["expand-clauses"],[]]],["invalid syntax",[["first"],[]]]]],[]]],[[[["cond-else-clause?"],[["first"],[]]],[[["if"],[[["null?"],[["the-rest"],[]]],[[["sequence->exp"],[[["cond-actions"],[["first"],[]]],[]]],[[["error"],[[["quote"],[["expand-clauses"],[]]],["else clause isn't last",[["clauses"],[]]]]],[]]]]],[]]],[[["else"],[[["make-if"],[[["cond-predicate"],[["first"],[]]],[[["sequence->exp"],[[["cond-actions"],[["first"],[]]],[]]],[[["expand-clauses"],[["the-rest"],[]]],[]]]]],[]]],[]]]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cond-predicate"],[["clause"],[]]],[[["car"],[["clause"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["make-if"],[["predicate"],[["consequent"],[["alternative"],[]]]]],[[["list"],[[["quote"],[["if"],[]]],[["predicate"],[["consequent"],[["alternative"],[]]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cond-actions"],[["clause"],[]]],[[["cdr"],[["clause"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["sequence->exp"],[["seq"],[]]],[[["cond"],[[[["null?"],[["seq"],[]]],[[["quote"],[[],[]]],[]]],[[[["null?"],[[["cdr"],[["seq"],[]]],[]]],[[["car"],[["seq"],[]]],[]]],[[["else"],[[["make-begin"],[["seq"],[]]],[]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["make-begin"],[["seq"],[]]],[[["cons"],[[["quote"],[["begin"],[]]],[["seq"],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cond-else-clause?"],[["clause"],[]]],[[["eq?"],[[["cond-predicate"],[["clause"],[]]],[[["quote"],[["else"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["cond?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["cond"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["begin-actions"],[["exp"],[]]],[[["cdr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["check-begin"],[["exp"],[]]],[[["cond"],[[[["<"],[[["len"],[["exp"],[]]],[2,[]]]],[[["error"],[[["quote"],[["check-begin"],[]]],["invalid arity",[["exp"],[]]]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["begin?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["begin"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["lambda-body"],[["exp"],[]]],[[["cddr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["lambda-parameters"],[["exp"],[]]],[[["cadr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["make-procedure"],[["parameters"],[["body"],[["env"],[]]]]],[[["list"],[[["quote"],[["compound"],[]]],[["parameters"],[["body"],[["env"],[]]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["check-lambda"],[["exp"],[]]],[[["cond"],[[[["<"],[[["len"],[["exp"],[]]],[3,[]]]],[[["error"],[[["quote"],[["check-lambda"],[]]],["invalid arity",[["exp"],[]]]]],[]]],[[[["and"],[[["not"],[[["null?"],[[["cadr"],[["exp"],[]]],[]]],[]]],[[["not"],[[["or"],[[["symbol?"],[[["cadr"],[["exp"],[]]],[]]],[[["pair?"],[[["cadr"],[["exp"],[]]],[]]],[]]]],[]]],[]]]],[[["error"],[[["quote"],[["check-lambda"],[]]],["invalid argument list",[["exp"],[]]]]],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["lambda?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["lambda"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["eval-if"],[["env"],[["exp"],[]]]],[[["if"],[[["true?"],[[["eval-env"],[["env"],[[["if-predicate"],[["exp"],[]]],[]]]],[]]],[[["eval-env"],[["env"],[[["if-consequent"],[["exp"],[]]],[]]]],[[["eval-env"],[["env"],[[["if-alternative"],[["exp"],[]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["if-alternative"],[["exp"],[]]],[[["cadddr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["if-consequent"],[["exp"],[]]],[[["caddr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["if-predicate"],[["exp"],[]]],[[["cadr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["true?"],[["exp"],[]]],[[["not"],[[["peq?"],[["exp"],[["false"],[]]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["check-if"],[["exp"],[]]],[[["cond"],[[[["not"],[[["peq?"],[[["len"],[["exp"],[]]],[4,[]]]],[]]],[[["error"],[[["quote"],[["check-if"],[]]],["invalid arity",[["exp"],[]]]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["if?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["if"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["eval-definition"],[["env"],[["exp"],[]]]],[[["env"],[[["definition-variable"],[["exp"],[]]],[["true"],[[["eval-env"],[["env"],[[["definition-value"],[["exp"],[]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["definition-value"],[["exp"],[]]],[[["if"],[[["symbol?"],[[["cadr"],[["exp"],[]]],[]]],[[["caddr"],[["exp"],[]]],[[["make-lambda"],[[["cdadr"],[["exp"],[]]],[[["cddr"],[["exp"],[]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["definition-variable"],[["exp"],[]]],[[["if"],[[["symbol?"],[[["cadr"],[["exp"],[]]],[]]],[[["cadr"],[["exp"],[]]],[[["caadr"],[["exp"],[]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["check-definition"],[["exp"],[]]],[[["cond"],[[[["not"],[[["or"],[[["and"],[[["symbol?"],[[["cadr"],[["exp"],[]]],[]]],[[["peq?"],[[["len"],[["exp"],[]]],[3,[]]]],[]]]],[[["and"],[[["pair?"],[[["cadr"],[["exp"],[]]],[]]],[[[">"],[[["len"],[["exp"],[]]],[2,[]]]],[]]]],[]]]],[]]],[[["error"],[[["quote"],[["check-definition"],[]]],["invalid format",[["exp"],[]]]]],[]]],[[[["not"],[[["symbol?"],[[["definition-variable"],[["exp"],[]]],[]]],[]]],[[["error"],[[["quote"],[["check-definition"],[]]],["invalid variable name",[["exp"],[]]]]],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["definition?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["define"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["eval-assignment"],[["env"],[["exp"],[]]]],[[["env"],[[["assignment-variable"],[["exp"],[]]],[["false"],[[["eval-env"],[["env"],[[["assignment-value"],[["exp"],[]]],[]]]],[]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["assignment-value"],[["exp"],[]]],[[["caddr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["assignment-variable"],[["exp"],[]]],[[["cadr"],[["exp"],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["check-assignment"],[["exp"],[]]],[[["cond"],[[[["not"],[[["peq?"],[[["len"],[["exp"],[]]],[3,[]]]],[]]],[[["error"],[[["quote"],[["check-assignment"],[]]],["invalid arity",[["exp"],[]]]]],[]]],[[[["not"],[[["symbol?"],[[["assignment-variable"],[["exp"],[]]],[]]],[]]],[[["error"],[[["quote"],[["check-assignment"],[]]],["invalid variable name",[["exp"],[]]]]],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["assignment?"],[["exp"],[]]],[[["tagged-list?"],[["exp"],[[["quote"],[["set!"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["check-quote"],[["exp"],[]]],[[["cond"],[[[["or"],[[["not"],[[["tagged-list?"],[["exp"],[[["quote"],[["quote"],[]]],[]]]],[]]],[[["not"],[[["peq?"],[[["len"],[["exp"],[]]],[2,[]]]],[]]],[]]]],[[["error"],[[["quote"],[["check-quote"],[]]],["invalid quotation",[[["quote"],[["???"],[]]],[]]]]],[]]],[]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["self-evaluating?"],[["exp"],[]]],[[["or"],[[["peq?"],[["exp"],[["true"],[]]]],[[["peq?"],[["exp"],[["false"],[]]]],[[["peq?"],[["exp"],[["no-print"],[]]]],[[["number?"],[["exp"],[]]],[[["string?"],[["exp"],[]]],[]]]]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["compound-procedure?"],[["p"],[]]],[[["tagged-list?"],[["p"],[[["quote"],[["compound"],[]]],[]]]],[]]]],_shared_45_precompiled];_shared_45_precompiled=[[["define"],[[["eval"],[["exp"],[]]],[[["eval-env"],[["mikkamakka"],[["exp"],[]]]],[]]]],_shared_45_precompiled];/* entry point */$_tail_45_call($_mktail(function(){/*error*/ var _error;_error=(function(){var body=function(_where,_what,_arg){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return $_mktail(_cerror.body,[_sprint_45_quoted.main(_where),_what,_sprint.main(_arg)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*symbol-eq?*/ var _symbol_45_eq_63_;_symbol_45_eq_63_=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_peq_63_.body,[_symbol_45_name.main(_left),_symbol_45_name.main(_right)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_symbol_63_.main(_right)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_symbol_63_.main(_left)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*print*/ var _print;_print=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_out.body,[_sprint.main(_s)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*log*/ var _log;_log=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_clog.body,[_sprint.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*newline*/ var _newline;_newline=(function(){var body=function(){return $_mktail(_out.body,["\n"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*print-stack*/ var _print_45_stack;_print_45_stack=(function(){var body=function(_error){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_out.main(_sprint_45_stack.main(_error));return $_mktail(_newline.body,[]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*display*/ var _display;_display=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_out.body,[_sunescape.main(_sprint.main(_s))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*self-evaluating?*/ var _self_45_evaluating_63_;_self_45_evaluating_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_string_63_.body,[_exp]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_number_63_.main(_exp)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_exp,_no_45_print)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_exp,_false)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_exp,_true)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*quote-text*/ var _quote_45_text;_quote_45_text=(function(){var body=function(_q){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _q[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*quote-eq?*/ var _quote_45_eq_63_;_quote_45_eq_63_=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_eq_63_.body,[_quote_45_text.main(_left),_quote_45_text.main(_right)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[(function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_null_63_.body,[_right[1]]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_null_63_.main(_left[1]))]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_quote_63_.main(_right)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_quote_63_.main(_left)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*eq?*/ var _eq_63_;_eq_63_=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_peq_63_.body,[_left,_right]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_quote_45_eq_63_.main(_left,_right)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_symbol_45_eq_63_.main(_left,_right)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[(function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_null_63_.body,[_right]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_null_63_.main(_left))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*not*/ var _not;_not=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_exp,_false))?_true:_false);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sescape-char*/ var _sescape_45_char;_sescape_45_char=(function(){var body=function(_char){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_char,"\b"))?"\\b":(false!==(_peq_63_.main(_char,"\t"))?"\\t":(false!==(_peq_63_.main(_char,"\n"))?"\\n":(false!==(_peq_63_.main(_char,"\v"))?"\\v":(false!==(_peq_63_.main(_char,"\f"))?"\\f":(false!==(_peq_63_.main(_char,"\r"))?"\\r":(false!==(_peq_63_.main(_char,"\""))?"\\\"":(false!==(_peq_63_.main(_char,"\\"))?"\\\\":_char))))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*escape-char?*/ var _escape_45_char_63_;_escape_45_char_63_=(function(){var body=function(_char){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_not.body,[_peq_63_.main(_sescape_45_char.main(_char),_char)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sescaped-char*/ var _sescaped_45_char;_sescaped_45_char=(function(){var body=function(_char_45_symbol){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_char_45_symbol,"b"))?"\b":(false!==(_peq_63_.main(_char_45_symbol,"t"))?"\t":(false!==(_peq_63_.main(_char_45_symbol,"n"))?"\n":(false!==(_peq_63_.main(_char_45_symbol,"v"))?"\v":(false!==(_peq_63_.main(_char_45_symbol,"f"))?"\f":(false!==(_peq_63_.main(_char_45_symbol,"r"))?"\r":_char_45_symbol))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sescape*/ var _sescape;_sescape=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*sescapes*/ var _sescapes;_sescapes=(function(){var body=function(_ss,_ps){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_peq_63_.main(_slen.main(_ss),0))?_ps:$_mktail(_sescapes.body,[_subs.main(_ss,1,-1),_cats.main(_ps,_sescape_45_char.main(_subs.main(_ss,0,1)))]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_sescapes.body,[_s,""]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sescape-symbol-name*/ var _sescape_45_symbol_45_name;_sescape_45_symbol_45_name=(function(){var body=function(_sn){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*find-escape-char*/ var _find_45_escape_45_char;_find_45_escape_45_char=(function(){var body=function(_ss){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_slen.main(_ss),0))?_sn:(false!==(_escape_45_char_63_.main(_subs.main(_ss,0,1)))?$_mktail(_cats.body,["|",_sn,"|"]):$_mktail(_find_45_escape_45_char.body,[_subs.main(_ss,1,-1)])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_find_45_escape_45_char.body,[_sn]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sunescape*/ var _sunescape;_sunescape=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*sunescapes*/ var _sunescapes;_sunescapes=(function(){var body=function(_ss,_ps,_escaped){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_peq_63_.main(_slen.main(_ss),0))?(false!==(_escaped)?$_mktail(_error.body,[["sunescape"],"invalid escape sequence",_s]):_ps):(false!==(_escaped)?$_mktail(_sunescapes.body,[_subs.main(_ss,1,-1),_cats.main(_ps,_sescaped_45_char.main(_subs.main(_ss,0,1))),_false]):(false!==(_peq_63_.main(_subs.main(_ss,0,1),"\\"))?$_mktail(_sunescapes.body,[_subs.main(_ss,1,-1),_ps,_true]):$_mktail(_sunescapes.body,[_subs.main(_ss,1,-1),_cats.main(_ps,_subs.main(_ss,0,1)),_false]))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_sunescapes.body,[_s,"",_false]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sprintq-vector*/ var _sprintq_45_vector;_sprintq_45_vector=(function(){var body=function(_vector){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*sprintq-vector*/ var _sprintq_45_vector;_sprintq_45_vector=(function(){var body=function(_builder,_vector,_ref){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_eq_63_.main(_ref,_vlen.main(_vector)))?_builder:$_mktail(_sprintq_45_vector.body,[_sbappend.main((false!==(__62_.main(_ref,0))?_sbappend.main(_builder," "):_builder),_sprintq.main(_vref.main(_vector,_ref),_true,_false)),_vector,__43_.main(_ref,1)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_builder_45__62_string.body,[_sbappend.main(_sprintq_45_vector.main(_sbappend.main(_make_45_string_45_builder.main(),"#("),_vector,0),")")]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sprintq-struct*/ var _sprintq_45_struct;_sprintq_45_struct=(function(){var body=function(_s){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*sprint-struct-members*/ var _sprint_45_struct_45_members;_sprint_45_struct_45_members=(function(){var body=function(_builder,_s,_names,_first_63_){if(arguments.length!==4){return $_cerror("procedure","invalid number of arguments",4);}return (false!==(_null_63_.main(_names))?_builder:$_mktail(_sprint_45_struct_45_members.body,[_sbappend.main((false!==(_first_63_)?_builder:_sbappend.main(_builder," ")),_sprintq.main([_names[0],[_table_45_lookup.main(_s,_names[0]),[]]],_true,_false)),_s,_names[1],_false]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_builder_45__62_string.body,[_sbappend.main(_sprint_45_struct_45_members.main(_sbappend.main(_make_45_string_45_builder.main(),"#s("),_s,_table_45_names.main(_s),_true),")")]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sprintq*/ var _sprintq;_sprintq=(function(){var body=function(_exp,_quoted_63_,_in_45_list_63_){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_peq_63_.main(_exp,_false))?"false":(false!==(_peq_63_.main(_exp,_true))?"true":(false!==(_peq_63_.main(_exp,_no_45_print))?"":(false!==(_number_63_.main(_exp))?$_mktail(_number_45__62_string.body,[_exp]):(false!==(_string_63_.main(_exp))?$_mktail(_cats.body,["\"",_sescape.main(_exp),"\""]):(false!==(_symbol_63_.main(_exp))?(false!==(_quoted_63_)?$_mktail(_sescape_45_symbol_45_name.body,[_symbol_45_name.main(_exp)]):$_mktail(_cats.body,["'",_sescape_45_symbol_45_name.main(_symbol_45_name.main(_exp))])):(false!==(_null_63_.main(_exp))?(false!==(_quoted_63_)?"()":"'()"):(false!==(_quote_63_.main(_exp))?$_mktail((function(){var body=function(_text){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_cats.body,["'",_sprintq.main(_text,_true,_false)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_try.main((function(){var body=function(){return $_mktail(_quote_45_text.body,[_exp]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return "???";};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})())]):(false!==(_vector_63_.main(_exp))?$_mktail(_sprintq_45_vector.body,[_exp]):(false!==(_pair_63_.main(_exp))?$_mktail(_cats.body,[(false!==(_not.main(_quoted_63_))?"'(":(false!==(_not.main(_in_45_list_63_))?"(":"")),(false!==(_in_45_list_63_)?" ":""),_sprintq.main(_exp[0],_true,_false),(false!==(_null_63_.main(_exp[1]))?")":(false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_not.body,[_quote_63_.main(_exp[1])]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_pair_63_.main(_exp[1])))?_sprintq.main(_exp[1],_true,_true):_cats.main(" . ",_sprintq.main(_exp[1],_true,_true),")")))]):(false!==(_table_63_.main(_exp))?$_mktail(_sprintq_45_struct.body,[_exp]):(false!==(_error_63_.main(_exp))?$_mktail(_sprint_45_error.body,[_exp]):"unknown type"))))))))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sprint*/ var _sprint;_sprint=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_sprintq.body,[_exp,_false,_false]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sprint-quoted*/ var _sprint_45_quoted;_sprint_45_quoted=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_sprintq.body,[_exp,_true,_false]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*tagged-list?*/ var _tagged_45_list_63_;_tagged_45_list_63_=(function(){var body=function(_exp,_tag){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_eq_63_.body,[_exp[0],_tag]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_pair_63_.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*len*/ var _len;_len=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_l))?0:$_mktail(__43_.body,[1,_len.main(_l[1])]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*append*/ var _append;_append=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_left))?_right:[_left[0],_append.main(_left[1],_right)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*reverse*/ var _reverse;_reverse=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_l))?[]:$_mktail(_append.body,[_reverse.main(_l[1]),[_l[0],[]]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*map*/ var _map;_map=(function(){var body=function(_p,_l){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_l))?[]:[_p.main(_l[0]),_map.main(_p,_l[1])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*deep-reverse*/ var _deep_45_reverse;_deep_45_reverse=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_map.body,[(function(){var body=function(_i){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_pair_63_.main(_i))?$_mktail(_deep_45_reverse.body,[_i]):_i);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),_reverse.main(_l)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*copy-table-filtered*/ var _copy_45_table_45_filtered;_copy_45_table_45_filtered=(function(){var body=function(_from,_to,_f){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}/*iterate*/ var _iterate;_iterate=(function(){var body=function(_names,_copied_45_names){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_names))?_copied_45_names:$_mktail((function(){var body=function(_name){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}(false!==(_f.main(_name))?(function(){_table_45_define.main(_to,_name,_table_45_lookup.main(_from,_name));return _copied_45_names=[_name,_copied_45_names];})():_true);return $_mktail(_iterate.body,[_names[1],_copied_45_names]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_names[0]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_iterate.body,[_table_45_names.main(_from),[]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*to-table*/ var _to_45_table;_to_45_table=(function(){var body=function(_l,_map_45_name,_map_45_value){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return $_mktail((function(){var body=function(_table){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_map.main((function(){var body=function(_i){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_define.body,[_table,_map_45_name.main(_i),_map_45_value.main(_i)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),_l);return _table;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_name_45_table.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*quote?*/ var _quote_63_;_quote_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["quote"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*check-quote*/ var _check_45_quote;_check_45_quote=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_not.body,[_peq_63_.main(_len.main(_exp),2)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_not.main(_tagged_45_list_63_.main(_exp,["quote"]))))?$_mktail(_error.body,[["check-quote"],"invalid quotation",["???"]]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*assignment-variable*/ var _assignment_45_variable;_assignment_45_variable=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*assignment?*/ var _assignment_63_;_assignment_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["set!"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*check-assignment*/ var _check_45_assignment;_check_45_assignment=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_peq_63_.main(_len.main(_exp),3)))?$_mktail(_error.body,[["check-assignment"],"invalid arity",_exp]):(false!==(_not.main(_symbol_63_.main(_assignment_45_variable.main(_exp))))?$_mktail(_error.body,[["check-assignment"],"invalid variable name",_exp]):_true));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*assignment-variable*/ var _assignment_45_variable;_assignment_45_variable=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*assignment-value*/ var _assignment_45_value;_assignment_45_value=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*eval-assignment*/ var _eval_45_assignment;_eval_45_assignment=(function(){var body=function(_env,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_env.body,[_assignment_45_variable.main(_exp),_false,_eval_45_env.main(_env,_assignment_45_value.main(_exp))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*definition?*/ var _definition_63_;_definition_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["define"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*definition-variable*/ var _definition_45_variable;_definition_45_variable=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_symbol_63_.main(_exp[1][0]))?_exp[1][0]:_exp[1][0][0]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*definition-value*/ var _definition_45_value;_definition_45_value=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_symbol_63_.main(_exp[1][0]))?_exp[1][1][0]:$_mktail(_make_45_lambda.body,[_exp[1][0][1],_exp[1][1]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*check-definition*/ var _check_45_definition;_check_45_definition=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(__62_.body,[_len.main(_exp),2]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_pair_63_.main(_exp[1][0])]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_peq_63_.body,[_len.main(_exp),3]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_symbol_63_.main(_exp[1][0])))))?$_mktail(_error.body,[["check-definition"],"invalid format",_exp]):(false!==(_not.main(_symbol_63_.main(_definition_45_variable.main(_exp))))?$_mktail(_error.body,[["check-definition"],"invalid variable name",_exp]):_true));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*eval-definition*/ var _eval_45_definition;_eval_45_definition=(function(){var body=function(_env,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_env.body,[_definition_45_variable.main(_exp),_true,_eval_45_env.main(_env,_definition_45_value.main(_exp))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*if?*/ var _if_63_;_if_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["if"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*check-if*/ var _check_45_if;_check_45_if=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_peq_63_.main(_len.main(_exp),4)))?$_mktail(_error.body,[["check-if"],"invalid arity",_exp]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*if-predicate*/ var _if_45_predicate;_if_45_predicate=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*if-consequent*/ var _if_45_consequent;_if_45_consequent=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*if-alternative*/ var _if_45_alternative;_if_45_alternative=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*true?*/ var _true_63_;_true_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_not.body,[_peq_63_.main(_exp,_false)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*eval-if*/ var _eval_45_if;_eval_45_if=(function(){var body=function(_env,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_true_63_.main(_eval_45_env.main(_env,_if_45_predicate.main(_exp))))?$_mktail(_eval_45_env.body,[_env,_if_45_consequent.main(_exp)]):$_mktail(_eval_45_env.body,[_env,_if_45_alternative.main(_exp)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-if*/ var _make_45_if;_make_45_if=(function(){var body=function(_predicate,_consequent,_alternative){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return [["if"],[_predicate,[_consequent,[_alternative,[]]]]];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-lambda*/ var _make_45_lambda;_make_45_lambda=(function(){var body=function(_parameters,_body){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return [["lambda"],[_parameters,_body]];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*lambda?*/ var _lambda_63_;_lambda_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["lambda"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*check-lambda*/ var _check_45_lambda;_check_45_lambda=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_len.main(_exp),3))?$_mktail(_error.body,[["check-lambda"],"invalid arity",_exp]):(false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_not.body,[(function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_pair_63_.body,[_exp[1][0]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_symbol_63_.main(_exp[1][0]))]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_not.main(_null_63_.main(_exp[1][0]))))?$_mktail(_error.body,[["check-lambda"],"invalid argument list",_exp]):_true));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*lambda-parameters*/ var _lambda_45_parameters;_lambda_45_parameters=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*lambda-body*/ var _lambda_45_body;_lambda_45_body=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-procedure*/ var _make_45_procedure;_make_45_procedure=(function(){var body=function(_parameters,_body,_env){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return [["compound"],[_parameters,[_body,[_env,[]]]]];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*begin?*/ var _begin_63_;_begin_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["begin"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*check-begin*/ var _check_45_begin;_check_45_begin=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_len.main(_exp),2))?$_mktail(_error.body,[["check-begin"],"invalid arity",_exp]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*begin-actions*/ var _begin_45_actions;_begin_45_actions=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*eval-sequence*/ var _eval_45_sequence;_eval_45_sequence=(function(){var body=function(_env,_seq){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_seq))?$_mktail(_error.body,[["eval-sequence"],"unspecified sequence",_seq]):(false!==(_null_63_.main(_seq[1]))?$_mktail(_eval_45_env.body,[_env,_seq[0]]):(function(){_eval_45_env.main(_env,_seq[0]);return $_mktail(_eval_45_sequence.body,[_env,_seq[1]]);})()));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-begin*/ var _make_45_begin;_make_45_begin=(function(){var body=function(_seq){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return [["begin"],_seq];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sequence->exp*/ var _sequence_45__62_exp;_sequence_45__62_exp=(function(){var body=function(_seq){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_seq))?[]:(false!==(_null_63_.main(_seq[1]))?_seq[0]:$_mktail(_make_45_begin.body,[_seq])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cond?*/ var _cond_63_;_cond_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["cond"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cond-clauses*/ var _cond_45_clauses;_cond_45_clauses=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cond-else-clause?*/ var _cond_45_else_45_clause_63_;_cond_45_else_45_clause_63_=(function(){var body=function(_clause){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_eq_63_.body,[_cond_45_predicate.main(_clause),["else"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cond-actions*/ var _cond_45_actions;_cond_45_actions=(function(){var body=function(_clause){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _clause[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cond-predicate*/ var _cond_45_predicate;_cond_45_predicate=(function(){var body=function(_clause){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _clause[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*expand-clauses*/ var _expand_45_clauses;_expand_45_clauses=(function(){var body=function(_clauses){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_clauses))?["true"]:$_mktail((function(){var body=function(_first,_the_45_rest){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_not.main(_pair_63_.main(_first)))?$_mktail(_error.body,[["expand-clauses"],"invalid syntax",_first]):(false!==(_cond_45_else_45_clause_63_.main(_first))?(false!==(_null_63_.main(_the_45_rest))?$_mktail(_sequence_45__62_exp.body,[_cond_45_actions.main(_first)]):$_mktail(_error.body,[["expand-clauses"],"else clause isn't last",_clauses])):$_mktail(_make_45_if.body,[_cond_45_predicate.main(_first),_sequence_45__62_exp.main(_cond_45_actions.main(_first)),_expand_45_clauses.main(_the_45_rest)])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_clauses[0],_clauses[1]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cond->if*/ var _cond_45__62_if;_cond_45__62_if=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_expand_45_clauses.body,[_cond_45_clauses.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*and?*/ var _and_63_;_and_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["and"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*and-expressions*/ var _and_45_expressions;_and_45_expressions=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*expand-and*/ var _expand_45_and;_expand_45_and=(function(){var body=function(_exps){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_exps))?["true"]:$_mktail((function(){var body=function(_first,_the_45_rest){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_the_45_rest))?_first:[[["lambda"],[[["predicate"],[]],[[["if"],[["predicate"],[_expand_45_and.main(_the_45_rest),[["predicate"],[]]]]],[]]]],[_first,[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_exps[0],_exps[1]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*and->if*/ var _and_45__62_if;_and_45__62_if=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_expand_45_and.body,[_and_45_expressions.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*or?*/ var _or_63_;_or_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["or"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*or-expressions*/ var _or_45_expressions;_or_45_expressions=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*expand-or*/ var _expand_45_or;_expand_45_or=(function(){var body=function(_exps){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_exps))?["false"]:$_mktail((function(){var body=function(_first,_the_45_rest){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_the_45_rest))?_first:[[["lambda"],[[["predicate"],[]],[[["if"],[["predicate"],[["predicate"],[_expand_45_or.main(_the_45_rest),[]]]]],[]]]],[_first,[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_exps[0],_exps[1]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*or->if*/ var _or_45__62_if;_or_45__62_if=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_expand_45_or.body,[_or_45_expressions.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*let?*/ var _let_63_;_let_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["let"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*check-let*/ var _check_45_let;_check_45_let=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_len.main(_exp),3))?$_mktail(_error.body,[["check-let"],"invalid arity",_exp]):(false!==(_not.main(_pair_63_.main(_exp[1][0])))?$_mktail(_error.body,[["check-let"],"invalid syntax",_exp]):_true));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*let-defs*/ var _let_45_defs;_let_45_defs=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*let-variables*/ var _let_45_variables;_let_45_variables=(function(){var body=function(_defs){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_map.body,[_car,_defs]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*let-values*/ var _let_45_values;_let_45_values=(function(){var body=function(_defs){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_map.body,[_cadr,_defs]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*let-body*/ var _let_45_body;_let_45_body=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*let->procedure*/ var _let_45__62_procedure;_let_45__62_procedure=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return [_make_45_lambda.main(_let_45_variables.main(_let_45_defs.main(_exp)),_let_45_body.main(_exp)),_let_45_values.main(_let_45_defs.main(_exp))];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*application?*/ var _application_63_;_application_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_pair_63_.body,[_exp]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*operator*/ var _operator;_operator=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*operands*/ var _operands;_operands=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _exp[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*no-operands?*/ var _no_45_operands_63_;_no_45_operands_63_=(function(){var body=function(_ops){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_null_63_.body,[_ops]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*first-operand*/ var _first_45_operand;_first_45_operand=(function(){var body=function(_ops){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _ops[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*rest-operands*/ var _rest_45_operands;_rest_45_operands=(function(){var body=function(_ops){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _ops[1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compound-procedure?*/ var _compound_45_procedure_63_;_compound_45_procedure_63_=(function(){var body=function(_p){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_p,["compound"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*procedure-parameters*/ var _procedure_45_parameters;_procedure_45_parameters=(function(){var body=function(_p){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _p[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*procedure-body*/ var _procedure_45_body;_procedure_45_body=(function(){var body=function(_p){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _p[1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*procedure-environment*/ var _procedure_45_environment;_procedure_45_environment=(function(){var body=function(_p){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _p[1][1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*list-of-values*/ var _list_45_of_45_values;_list_45_of_45_values=(function(){var body=function(_env,_exps){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_no_45_operands_63_.main(_exps))?[]:[_eval_45_env.main(_env,_first_45_operand.main(_exps)),_list_45_of_45_values.main(_env,_rest_45_operands.main(_exps))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*extend-procedure-environment*/ var _extend_45_procedure_45_environment;_extend_45_procedure_45_environment=(function(){var body=function(_env,_parameters,_values){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}/*define-args*/ var _define_45_args;_define_45_args=(function(){var body=function(_env,_parameters,_values){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_null_63_.main(_parameters))?(false!==(_not.main(_null_63_.main(_values)))?$_mktail(_error.body,[["procedure-environment"],"too many values",[_parameters,[_values,[]]]]):_true):(false!==(_symbol_63_.main(_parameters))?$_mktail(_env.body,[_parameters,_true,_values]):(false!==(_null_63_.main(_values))?$_mktail(_error.body,[["procedure-environment"],"too many parameters",[_parameters,[_values,[]]]]):(function(){_env.main(_parameters[0],_true,_values[0]);return $_mktail(_define_45_args.body,[_env,_parameters[1],_values[1]]);})())));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail((function(){var body=function(_env){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_define_45_args.main(_env,_parameters,_values);return _env;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_extend_45_env.main(_env,_false)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*apply*/ var _apply;_apply=(function(){var body=function(_proc,_args){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_compiled_45_procedure_63_.main(_proc))?$_mktail(_capply.body,[_proc,_args]):(false!==(_compound_45_procedure_63_.main(_proc))?$_mktail(_eval_45_sequence.body,[_extend_45_procedure_45_environment.main(_procedure_45_environment.main(_proc),_procedure_45_parameters.main(_proc),_args),_procedure_45_body.main(_proc)]):$_mktail(_error.body,[["apply"],"unknown procedure type",_proc])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*eval-env*/ var _eval_45_env;_eval_45_env=(function(){var body=function(_env,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_self_45_evaluating_63_.main(_exp))?_exp:(false!==(_symbol_63_.main(_exp))?$_mktail(_env.body,[_exp]):(false!==(_vector_63_.main(_exp))?_exp:(false!==(_struct_63_.main(_exp))?_exp:(false!==(_quote_63_.main(_exp))?(function(){_check_45_quote.main(_exp);return $_mktail(_quote_45_text.body,[_exp]);})():(false!==(_assignment_63_.main(_exp))?(function(){_check_45_assignment.main(_exp);return $_mktail(_eval_45_assignment.body,[_env,_exp]);})():(false!==(_definition_63_.main(_exp))?(function(){_check_45_definition.main(_exp);return $_mktail(_eval_45_definition.body,[_env,_exp]);})():(false!==(_if_63_.main(_exp))?(function(){_check_45_if.main(_exp);return $_mktail(_eval_45_if.body,[_env,_exp]);})():(false!==(_lambda_63_.main(_exp))?(function(){_check_45_lambda.main(_exp);return $_mktail(_make_45_procedure.body,[_lambda_45_parameters.main(_exp),_lambda_45_body.main(_exp),_env]);})():(false!==(_begin_63_.main(_exp))?(function(){_check_45_begin.main(_exp);return $_mktail(_eval_45_sequence.body,[_env,_begin_45_actions.main(_exp)]);})():(false!==(_cond_63_.main(_exp))?$_mktail(_eval_45_env.body,[_env,_cond_45__62_if.main(_exp)]):(false!==(_and_63_.main(_exp))?$_mktail(_eval_45_env.body,[_env,_and_45__62_if.main(_exp)]):(false!==(_or_63_.main(_exp))?$_mktail(_eval_45_env.body,[_env,_or_45__62_if.main(_exp)]):(false!==(_let_63_.main(_exp))?(function(){_check_45_let.main(_exp);return $_mktail(_eval_45_env.body,[_env,_let_45__62_procedure.main(_exp)]);})():(false!==(_application_63_.main(_exp))?$_mktail(_apply.body,[_eval_45_env.main(_env,_operator.main(_exp)),_list_45_of_45_values.main(_env,_operands.main(_exp))]):$_mktail(_error.body,[["eval-env"],"unknown expression type",_exp]))))))))))))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*eval*/ var _eval;_eval=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_eval_45_env.body,[_mikkamakka,_exp]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-pair*/ var _compile_45_pair;_compile_45_pair=(function(){var body=function(_context,_p){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_compile_45_write.main(_context,"[");_compile_45_literal.main(_context,_p[0]);_compile_45_write.main(_context,",");_compile_45_literal.main(_context,_p[1]);return $_mktail(_compile_45_write.body,[_context,"]"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-vector*/ var _compile_45_vector;_compile_45_vector=(function(){var body=function(_context,_v){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}/*compile-vector*/ var _compile_45_vector;_compile_45_vector=(function(){var body=function(_v,_ref){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_eq_63_.main(_ref,_vlen.main(_v)))?["ok"]:(function(){(false!==(__62_.main(_ref,0))?_compile_45_write.main(_context,","):_true);_compile_45_exp.main(_context,_vref.main(_v,_ref));return $_mktail(_compile_45_vector.body,[_v,__43_.main(_ref,1)]);})());};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();_compile_45_write.main(_context,"{vector:[");_compile_45_vector.main(_v,0);return $_mktail(_compile_45_write.body,[_context,"]}"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-struct*/ var _compile_45_struct;_compile_45_struct=(function(){var body=function(_context,_s){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}/*compile-member*/ var _compile_45_member;_compile_45_member=(function(){var body=function(_name){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_compile_45_write.main(_context,_sprint.main(_symbol_45_name.main(_name)));return $_mktail(_compile_45_write.body,[_context,":"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*recur*/ var _recur;_recur=(function(){var body=function(_s,_names,_first_63_){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_null_63_.main(_names))?["ok"]:(function(){(false!==(_not.main(_first_63_))?_compile_45_write.main(","):_true);_compile_45_member.main(_names[0]);return $_mktail(_recur.body,[_s,_names[1],_false]);})());};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();_compile_45_write.main(_context,"{table: {");_recur.main(_s,_table_45_names.main(_s),_true);return $_mktail(_compile_45_write.body,[_context,"}}"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*in-tail*/ var _in_45_tail;_in_45_tail=(function(){var body=function(_context,_value,_f){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return $_mktail((function(){var body=function(_parent_45_tail_63_){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_set_45_tail_33_.main(_context,_value);_f.main();return $_mktail(_set_45_tail_33_.body,[_context,_parent_45_tail_63_]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_tail_63_.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-literal*/ var _compile_45_literal;_compile_45_literal=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_in_45_tail.body,[_context,_false,(function(){var body=function(){return (false!==(_self_45_evaluating_63_.main(_exp))?$_mktail(_compile_45_write.body,[_context,_sprint.main(_exp)]):(false!==(_symbol_63_.main(_exp))?$_mktail(_compile_45_write.body,[_context,_cats.main("[",_sprint.main(_symbol_45_name.main(_exp)),"]")]):(false!==(_null_63_.main(_exp))?$_mktail(_compile_45_write.body,[_context,"[]"]):(false!==(_pair_63_.main(_exp))?$_mktail(_compile_45_pair.body,[_context,_exp]):(false!==(_vector_63_.main(_exp))?$_mktail(_compile_45_vector.body,[_context,_exp]):(false!==(_struct_63_.main(_exp))?$_mktail(_compile_45_struct.body,[_context,_exp]):$_mktail(_error.body,[["compile-literal"],"unknown type",_exp])))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-variable*/ var _compile_45_variable;_compile_45_variable=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_compile_45_write.main(_context,_map_45_name.main(_context,_exp));return $_mktail(_add_45_compile_45_dependency.body,[_context,_exp]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-assignment*/ var _compile_45_assignment;_compile_45_assignment=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_compile_45_write.main(_context,_map_45_name.main(_context,_assignment_45_variable.main(_exp)));_compile_45_write.main(_context,"=");return $_mktail(_compile_45_exp.body,[_context,_assignment_45_value.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-definition*/ var _compile_45_definition;_compile_45_definition=(function(){var body=function(_context,_exp,_last_63_){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}_add_45_compile_45_definition.main(_context,_definition_45_variable.main(_exp),_exp);_push_45_compile_45_scope.main(_context,_definition_45_variable.main(_exp));_compile_45_write.main(_context,"/*");_compile_45_write.main(_context,_symbol_45_name.main(_definition_45_variable.main(_exp)));_compile_45_write.main(_context,"*/ var ");_compile_45_write.main(_context,_map_45_name.main(_context,_definition_45_variable.main(_exp)));_compile_45_write.main(_context,";");(false!==(_last_63_)?_compile_45_write.main(_context,"return "):_true);_compile_45_write.main(_context,_map_45_name.main(_context,_definition_45_variable.main(_exp)));_compile_45_write.main(_context,"=");_compile_45_exp.main(_context,_definition_45_value.main(_exp));return $_mktail(_pop_45_compile_45_scope.body,[_context]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-if*/ var _compile_45_if;_compile_45_if=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_compile_45_write.main(_context,"(false!==(");_in_45_tail.main(_context,_false,(function(){var body=function(){return $_mktail(_compile_45_exp.body,[_context,_if_45_predicate.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_compile_45_write.main(_context,")?");_compile_45_exp.main(_context,_if_45_consequent.main(_exp));_compile_45_write.main(_context,":");_compile_45_exp.main(_context,_if_45_alternative.main(_exp));return $_mktail(_compile_45_write.body,[_context,")"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-sequence*/ var _compile_45_sequence;_compile_45_sequence=(function(){var body=function(_context,_seq){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_seq))?$_mktail(_error.body,[["compile-sequence"],"unspecified sequence",_seq]):(false!==(_null_63_.main(_seq[1]))?$_mktail(_compile_45_statement.body,[_context,_seq[0],_true]):(function(){_in_45_tail.main(_context,_false,(function(){var body=function(){return $_mktail(_compile_45_statement.body,[_context,_seq[0],_false]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail(_compile_45_sequence.body,[_context,_seq[1]]);})()));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-parameters*/ var _compile_45_parameters;_compile_45_parameters=(function(){var body=function(_context,_parameters){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}/*compile-parameters*/ var _compile_45_parameters;_compile_45_parameters=(function(){var body=function(_parameters,_count,_first_63_){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_null_63_.main(_parameters))?[_count,[_false,[]]]:(false!==(_symbol_63_.main(_parameters))?[_count,[_parameters,[]]]:(function(){(false!==(_not.main(_first_63_))?_compile_45_write.main(_context,","):_true);_compile_45_exp.main(_context,_parameters[0]);return $_mktail(_compile_45_parameters.body,[_parameters[1],__43_.main(_count,1),_false]);})()));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_compile_45_parameters.body,[_parameters,0,_true]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-parameter-check*/ var _compile_45_parameter_45_check;_compile_45_parameter_45_check=(function(){var body=function(_context,_params){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==((false!==(_list_45_param_45_name.main(_params))?(function(){_compile_45_write.main(_context,"if(arguments.length<");_compile_45_write.main(_context,_sprint.main(_number_45_of_45_params.main(_params)));return _true;})():(false!==(__62_.main(_number_45_of_45_params.main(_params),0))?(function(){_compile_45_write.main(_context,"if(arguments.length!==");_compile_45_write.main(_context,_sprint.main(_number_45_of_45_params.main(_params)));return _true;})():_false)))?$_mktail(_compile_45_write.body,[_context,_cats.main("){return ",_sysname.main(_context,["cerror"]),"(\"procedure\",","\"invalid number of arguments\",",_sprint.main(_number_45_of_45_params.main(_params)),");}")]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-list-params*/ var _compile_45_list_45_params;_compile_45_list_45_params=(function(){var body=function(_context,_params){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_list_45_param_45_name.main(_params))?(function(){_compile_45_write.main(_context,"var ");_compile_45_write.main(_context,_map_45_name.main(_context,_list_45_param_45_name.main(_params)));_compile_45_write.main(_context,"=");_compile_45_write.main(_context,_sysname.main(_context,["list"]));_compile_45_write.main(_context,".apply(undefined, Array.prototype.slice.call(arguments, ");_compile_45_write.main(_context,_sprint.main(_number_45_of_45_params.main(_params)));return $_mktail(_compile_45_write.body,[_context,"));"]);})():_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*number-of-params*/ var _number_45_of_45_params;_number_45_of_45_params=(function(){var body=function(_params){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _params[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*list-param-name*/ var _list_45_param_45_name;_list_45_param_45_name=(function(){var body=function(_params){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _params[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-procedure*/ var _compile_45_procedure;_compile_45_procedure=(function(){var body=function(_context,_parameters,_body){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}_compile_45_write.main(_context,"(function(){var body=function(");return $_mktail((function(){var body=function(_params){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_compile_45_write.main(_context,"){");_compile_45_parameter_45_check.main(_context,_params);_compile_45_list_45_params.main(_context,_params);_in_45_tail.main(_context,_true,(function(){var body=function(){return $_mktail(_compile_45_sequence.body,[_context,_body]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_compile_45_write.main(_context,"};var p=function(){");_compile_45_write.main(_context,"return ");_compile_45_write.main(_context,_sysname.main(_context,["tail-call"]));_compile_45_write.main(_context,"(");_compile_45_write.main(_context,_sysname.main(_context,["mktail"]));_compile_45_write.main(_context,"(body,Array.prototype.slice.call(arguments)");return $_mktail(_compile_45_write.body,[_context,"));};p.main=p;p.body=body;return p;})()"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_compile_45_parameters.main(_context,_parameters)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-begin*/ var _compile_45_begin;_compile_45_begin=(function(){var body=function(_context,_actions){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_compile_45_write.main(_context,"(function(){");_compile_45_sequence.main(_context,_actions);return $_mktail(_compile_45_write.body,[_context,"})()"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*car?*/ var _car_63_;_car_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_eq_63_.body,[_len.main(_exp),2]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_tagged_45_list_63_.main(_exp,["car"])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-car*/ var _compile_45_car;_compile_45_car=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_compile_45_exp.main(_context,_exp[1][0]);return $_mktail(_compile_45_write.body,[_context,"[0]"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdr?*/ var _cdr_63_;_cdr_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_eq_63_.body,[_len.main(_exp),2]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_tagged_45_list_63_.main(_exp,["cdr"])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-cdr*/ var _compile_45_cdr;_compile_45_cdr=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_compile_45_exp.main(_context,_exp[1][0]);return $_mktail(_compile_45_write.body,[_context,"[1]"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*c[ad]+r-rx*/ var _c_91_ad_93__43_r_45_rx;_c_91_ad_93__43_r_45_rx=_make_45_regexp.main("^c[ad]+r$","");/*c[ad]+r?*/ var _c_91_ad_93__43_r_63_;_c_91_ad_93__43_r_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(__62_.body,[_vlen.main(_c_91_ad_93__43_r_45_rx.main(_symbol_45_name.main(_exp[0]))),0]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_string_63_.main(_symbol_45_name.main(_exp[0]))]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_eq_63_.main(_len.main(_exp),2)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_pair_63_.main(_exp)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-c[ad]+r*/ var _compile_45_c_91_ad_93__43_r;_compile_45_c_91_ad_93__43_r=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}/*iter*/ var _iter;_iter=(function(){var body=function(_name,_ref){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(__60_.main(_ref,0))?["ok"]:(function(){_compile_45_write.main(_context,(false!==(_eq_63_.main(_char_45_at.main(_name,_ref),"a"))?"[0]":"[1]"));return $_mktail(_iter.body,[_name,__45_.main(_ref,1)]);})());};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();_in_45_tail.main(_context,_false,(function(){var body=function(){return $_mktail(_compile_45_exp.body,[_context,_exp[1][0]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail((function(){var body=function(_name){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_iter.body,[_subs.main(_name,1,__45_.main(_slen.main(_name),2)),__45_.main(_slen.main(_name),3)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_symbol_45_name.main(_exp[0])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons?*/ var _cons_63_;_cons_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_eq_63_.body,[_len.main(_exp),3]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_tagged_45_list_63_.main(_exp,["cons"])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-cons*/ var _compile_45_cons;_compile_45_cons=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_in_45_tail.body,[_context,_false,(function(){var body=function(){_compile_45_write.main(_context,"[");_compile_45_exp.main(_context,_exp[1][0]);_compile_45_write.main(_context,",");_compile_45_exp.main(_context,_exp[1][1][0]);return $_mktail(_compile_45_write.body,[_context,"]"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*list-constructor?*/ var _list_45_constructor_63_;_list_45_constructor_63_=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_tagged_45_list_63_.body,[_exp,["list"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-list-constructor*/ var _compile_45_list_45_constructor;_compile_45_list_45_constructor=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_in_45_tail.body,[_context,_false,(function(){var body=function(){return (false!==(_null_63_.main(_exp[1]))?$_mktail(_compile_45_write.body,[_context,"[]"]):$_mktail(_compile_45_exp.body,[_context,[["cons"],[_exp[1][0],[[["list"],_exp[1][1]],[]]]]]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-application*/ var _compile_45_application;_compile_45_application=(function(){var body=function(_context,_proc,_args){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return (false!==(_tail_63_.main(_context))?(function(){_compile_45_write.main(_context,_sysname.main(_context,["mktail"]));_compile_45_write.main(_context,"(");_compile_45_exp.main(_context,_proc);_compile_45_write.main(_context,".body,[");_in_45_tail.main(_context,_false,(function(){var body=function(){return $_mktail(_compile_45_parameters.body,[_context,_args]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail(_compile_45_write.body,[_context,"])"]);})():(function(){_compile_45_exp.main(_context,_proc);_compile_45_write.main(_context,".main(");_compile_45_parameters.main(_context,_args);return $_mktail(_compile_45_write.body,[_context,")"]);})());};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-exp*/ var _compile_45_exp;_compile_45_exp=(function(){var body=function(_context,_exp){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_self_45_evaluating_63_.main(_exp))?$_mktail(_compile_45_literal.body,[_context,_exp]):(false!==(_symbol_63_.main(_exp))?$_mktail(_compile_45_variable.body,[_context,_exp]):(false!==(_vector_63_.main(_exp))?$_mktail(_compile_45_literal.body,[_context,_exp]):(false!==(_struct_63_.main(_exp))?$_mktail(_compile_45_literal.body,[_context,_exp]):(false!==(_quote_63_.main(_exp))?$_mktail(_compile_45_literal.body,[_context,_quote_45_text.main(_exp)]):(false!==(_assignment_63_.main(_exp))?(function(){_check_45_assignment.main(_exp);return $_mktail(_compile_45_assignment.body,[_context,_exp]);})():(false!==(_definition_63_.main(_exp))?$_mktail(_error.body,[["compile-exp"],"definition not allowed as expression",_exp]):(false!==(_if_63_.main(_exp))?(function(){_check_45_if.main(_exp);return $_mktail(_compile_45_if.body,[_context,_exp]);})():(false!==(_lambda_63_.main(_exp))?(function(){_check_45_lambda.main(_exp);return $_mktail(_compile_45_procedure.body,[_context,_lambda_45_parameters.main(_exp),_lambda_45_body.main(_exp)]);})():(false!==(_begin_63_.main(_exp))?(function(){_check_45_begin.main(_exp);return $_mktail(_compile_45_begin.body,[_context,_begin_45_actions.main(_exp)]);})():(false!==(_cond_63_.main(_exp))?$_mktail(_compile_45_exp.body,[_context,_cond_45__62_if.main(_exp)]):(false!==(_and_63_.main(_exp))?$_mktail(_compile_45_exp.body,[_context,_and_45__62_if.main(_exp)]):(false!==(_or_63_.main(_exp))?$_mktail(_compile_45_exp.body,[_context,_or_45__62_if.main(_exp)]):(false!==(_let_63_.main(_exp))?(function(){_check_45_let.main(_exp);return $_mktail(_compile_45_exp.body,[_context,_let_45__62_procedure.main(_exp)]);})():(false!==(_c_91_ad_93__43_r_63_.main(_exp))?$_mktail(_compile_45_c_91_ad_93__43_r.body,[_context,_exp]):(false!==(_cons_63_.main(_exp))?$_mktail(_compile_45_cons.body,[_context,_exp]):(false!==(_list_45_constructor_63_.main(_exp))?$_mktail(_compile_45_list_45_constructor.body,[_context,_exp]):(false!==(_application_63_.main(_exp))?$_mktail(_compile_45_application.body,[_context,_operator.main(_exp),_operands.main(_exp)]):$_mktail(_error.body,[["compile-exp"],"invalid expression",_exp])))))))))))))))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-statement*/ var _compile_45_statement;_compile_45_statement=(function(){var body=function(_context,_exp,_last_63_){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}(false!==(_definition_63_.main(_exp))?(function(){_check_45_definition.main(_exp);return _compile_45_definition.main(_context,_exp,_last_63_);})():(false!==(_last_63_)?(function(){_compile_45_write.main(_context,"return ");return _compile_45_exp.main(_context,_exp);})():_compile_45_exp.main(_context,_exp)));return $_mktail(_compile_45_write.body,[_context,";"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-compile-scope*/ var _make_45_compile_45_scope;_make_45_compile_45_scope=(function(){var body=function(_name){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_scope){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_table_45_define.main(_scope,["name"],_name);_table_45_define.main(_scope,["definitions"],_make_45_name_45_table.main());_table_45_define.main(_scope,["dependencies"],_make_45_name_45_table.main());return _scope;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_name_45_table.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-name-gen*/ var _make_45_name_45_gen;_make_45_name_45_gen=(function(){var body=function(){/*inc*/ var _inc;_inc=(function(){var body=function(_base,_val){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_val))?[0,[]]:$_mktail((function(){var body=function(_lowest){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_lowest,_base))?[_lowest,_val[1]]:[0,_inc.main(_base,_val[1])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[__43_.main(_val[0],1)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*print*/ var _print;_print=(function(){var body=function(_digits,_val){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_val))?$_mktail(_sbappend.body,[_make_45_string_45_builder.main(),"_"]):$_mktail(_sbappend.body,[_print.main(_digits,_val[1]),_char_45_at.main(_digits,_val[0])]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail((function(){var body=function(_digits,_ref){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (function(){var body=function(){_ref=_inc.main(_slen.main(_digits),_ref);return $_mktail(_builder_45__62_string.body,[_print.main(_digits,_ref)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,["abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",[]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-name-map*/ var _make_45_name_45_map;_make_45_name_45_map=(function(){var body=function(){return $_mktail((function(){var body=function(_name_45_gen,_names){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (function(){var body=function(_name){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_table_45_has_45_name_63_.main(_names,_name))?$_mktail(_table_45_lookup.body,[_names,_name]):$_mktail((function(){var body=function(_mapped){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_table_45_define.main(_names,_name,_mapped);return _mapped;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_name_45_gen.main()]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_name_45_gen.main(),_make_45_name_45_table.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-compile-context*/ var _make_45_compile_45_context;_make_45_compile_45_context=(function(){var body=function(_names){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_table_45_define.main(_context,["names"],_names);_table_45_define.main(_context,["expressions"],_make_45_name_45_table.main());_table_45_define.main(_context,["stack"],[_make_45_compile_45_scope.main(["top"]),[]]);_table_45_define.main(_context,["output"],_make_45_string_45_builder.main());_table_45_define.main(_context,["tail?"],_true);return _context;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_name_45_table.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*context-names*/ var _context_45_names;_context_45_names=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_context,["names"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*map-name-gen*/ var _map_45_name_45_gen;_map_45_name_45_gen=(function(){var body=function(_context,_name){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail($_mktail(_context_45_names.body,[_context]).body,[_name]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*map-name*/ var _map_45_name;_map_45_name=(function(){var body=function(_context,_name){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_cats.body,["_",_sreplace.main(_symbol_45_name.main(_name),"\\W",(function(){var body=function(_s,__,__){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return $_mktail(_cats.body,["_",_sprint.main(_char_45_code_45_at.main(_s,0)),"_"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})())]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*scope-name*/ var _scope_45_name;_scope_45_name=(function(){var body=function(_scope){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_scope,["name"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-expressions*/ var _compile_45_expressions;_compile_45_expressions=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_context,["expressions"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-stack*/ var _compile_45_stack;_compile_45_stack=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_context,["stack"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-scope*/ var _compile_45_scope;_compile_45_scope=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _compile_45_stack.main(_context)[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*scope-dependencies*/ var _scope_45_dependencies;_scope_45_dependencies=(function(){var body=function(_scope){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_scope,["dependencies"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-dependencies*/ var _compile_45_dependencies;_compile_45_dependencies=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_scope_45_dependencies.body,[_compile_45_scope.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*scope-definitions*/ var _scope_45_definitions;_scope_45_definitions=(function(){var body=function(_scope){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_scope,["definitions"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-definitions*/ var _compile_45_definitions;_compile_45_definitions=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_scope_45_definitions.body,[_compile_45_scope.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*add-compile-dependency*/ var _add_45_compile_45_dependency;_add_45_compile_45_dependency=(function(){var body=function(_context,_name){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_table_45_define.body,[_compile_45_dependencies.main(_context),_name,_true]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*add-compile-definition*/ var _add_45_compile_45_definition;_add_45_compile_45_definition=(function(){var body=function(_context,_name,_exp){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}(false!==(_eq_63_.main(_scope_45_name.main(_compile_45_scope.main(_context)),["top"]))?_table_45_define.main(_compile_45_expressions.main(_context),_name,_exp):_true);return $_mktail(_table_45_define.body,[_compile_45_definitions.main(_context),_name,_make_45_name_45_table.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*push-compile-scope*/ var _push_45_compile_45_scope;_push_45_compile_45_scope=(function(){var body=function(_context,_name){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_table_45_set_33_.body,[_context,["stack"],[_make_45_compile_45_scope.main(_name),_compile_45_stack.main(_context)]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*pop-compile-scope*/ var _pop_45_compile_45_scope;_pop_45_compile_45_scope=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_current_45_scope){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_parent_45_definition,_current_45_definitions){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}/*undefined?*/ var _undefined_63_;_undefined_63_=(function(){var body=function(_dep){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_not.body,[_table_45_has_45_name_63_.main(_current_45_definitions,_dep)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*copy-def-deps*/ var _copy_45_def_45_deps;_copy_45_def_45_deps=(function(){var body=function(_def_45_names){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_null_63_.main(_def_45_names)))?(function(){_copy_45_table_45_filtered.main(_table_45_lookup.main(_current_45_definitions,_def_45_names[0]),_parent_45_definition,_undefined_63_);return $_mktail(_copy_45_def_45_deps.body,[_def_45_names[1]]);})():_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();_copy_45_def_45_deps.main(_table_45_names.main(_current_45_definitions));_copy_45_table_45_filtered.main(_scope_45_dependencies.main(_current_45_scope),_parent_45_definition,_undefined_63_);return $_mktail(_table_45_set_33_.body,[_context,["stack"],_compile_45_stack.main(_context)[1]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_table_45_lookup.main(_scope_45_definitions.main(_compile_45_stack.main(_context)[1][0]),_scope_45_name.main(_current_45_scope)),_scope_45_definitions.main(_current_45_scope)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_compile_45_scope.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-buffer*/ var _compile_45_buffer;_compile_45_buffer=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_context,["output"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*tail?*/ var _tail_63_;_tail_63_=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_context,["tail?"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*set-tail!*/ var _set_45_tail_33_;_set_45_tail_33_=(function(){var body=function(_context,_value){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_table_45_set_33_.body,[_context,["tail?"],_value]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-write*/ var _compile_45_write;_compile_45_write=(function(){var body=function(_context,_s){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_table_45_set_33_.body,[_context,["output"],_sbappend.main(_compile_45_buffer.main(_context),_s)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*precompile-exp*/ var _precompile_45_exp;_precompile_45_exp=(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return [["set!"],[["shared-precompiled"],[[["cons"],[[["quote"],[_exp,[]]],[["shared-precompiled"],[]]]],[]]]];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*copy-head*/ var _copy_45_head;_copy_45_head=(function(){var body=function(_clb){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_read_45_file.body,["mm-head.js",(function(){var body=function(_data){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_out.main(_data);return $_mktail(_clb.body,[]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sysname*/ var _sysname;_sysname=(function(){var body=function(_context,_name){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_cats.body,["$",_map_45_name.main(_context,_name)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-lang*/ var _compile_45_lang;_compile_45_lang=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*iterate*/ var _iterate;_iterate=(function(){var body=function(_lang_45_names){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_lang_45_names))?["ok"]:(function(){_compile_45_write.main(_context,"var ");_compile_45_write.main(_context,_sysname.main(_context,_lang_45_names[0]));_compile_45_write.main(_context,"=env(\"");_compile_45_write.main(_context,_lang_45_names[0]);_compile_45_write.main(_context,"\");");return $_mktail(_iterate.body,[_lang_45_names[1]]);})());};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_iterate.body,[[["mktail"],[["tail-call"],[["cerror"],[["list"],[]]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile-shared*/ var _compile_45_shared;_compile_45_shared=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*iterate*/ var _iterate;_iterate=(function(){var body=function(_shared){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_null_63_.main(_shared)))?(function(){_compile_45_statement.main(_context,_shared[0],_false);(false!==(_definition_63_.main(_shared[0]))?(function(){_compile_45_write.main(_context,"env(\"");_compile_45_write.main(_context,_symbol_45_name.main(_definition_45_variable.main(_shared[0])));_compile_45_write.main(_context,"\",true,");_compile_45_write.main(_context,_map_45_name.main(_context,_definition_45_variable.main(_shared[0])));return _compile_45_write.main(_context,");");})():_true);return $_mktail(_iterate.body,[_shared[1]]);})():_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_iterate.body,[_shared_45_precompiled]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*tokenizer-expression*/ var _tokenizer_45_expression;_tokenizer_45_expression=[";[^\\n]*\\n?|",["\\(|\\)|",["#\\(|",["#s\\(|",["'|",["\"(\\\\\\\\|\\\\\"|[^\"])*\"?|",["(\\\\.|",["\\|(\\\\\\\\|\\\\\\||[^|])*\\|?|",["[^;()'|\"\\s])+",[]]]]]]]]]];/*tokenizer-rx*/ var _tokenizer_45_rx;_tokenizer_45_rx=_make_45_regexp.main(_apply.main(_cats,_tokenizer_45_expression),"g");/*token-complete-expression*/ var _token_45_complete_45_expression;_token_45_complete_45_expression=["^(;[^\\n]*\\n|",["\\(|",["\\)|",["#\\(|",["#s\\(|",["'|",["\"(\\\\\"|\\\\[^\"]|[^\\\\\"])*\"|",["(\\\\.|",["\\|(\\\\\\||\\\\[^\\|]|[^\\\\|])*\\||",["[^;()#'|\"\\s\\\\])+)$",[]]]]]]]]]]];/*token-complete-rx*/ var _token_45_complete_45_rx;_token_45_complete_45_rx=_make_45_regexp.main(_apply.main(_cats,_token_45_complete_45_expression),"");/*make-read-context*/ var _make_45_read_45_context;_make_45_read_45_context=(function(){var body=function(){return $_mktail((function(){var body=function(_context,_tokens){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_table_45_define.main(_tokens,["fragments"],[]);_table_45_define.main(_tokens,["ref"],0);_table_45_define.main(_context,["tokens"],_tokens);_table_45_define.main(_context,["stack"],[]);_table_45_define.main(_context,["expressions"],[]);return _context;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_name_45_table.main(),_make_45_name_45_table.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-tokens*/ var _read_45_tokens;_read_45_tokens=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_context,["tokens"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-tokens-list*/ var _read_45_tokens_45_list;_read_45_tokens_45_list=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_read_45_tokens.main(_context),["fragments"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-token-ref*/ var _read_45_token_45_ref;_read_45_token_45_ref=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_read_45_tokens.main(_context),["ref"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-stack*/ var _read_45_stack;_read_45_stack=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_context,["stack"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-stack-empty?*/ var _read_45_stack_45_empty_63_;_read_45_stack_45_empty_63_=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_null_63_.body,[_read_45_stack.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*current-stack-frame*/ var _current_45_stack_45_frame;_current_45_stack_45_frame=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _read_45_stack.main(_context)[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*current-read-list-type*/ var _current_45_read_45_list_45_type;_current_45_read_45_list_45_type=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_current_45_stack_45_frame.main(_context),["type"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*current-read-list*/ var _current_45_read_45_list;_current_45_read_45_list=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_current_45_stack_45_frame.main(_context),["list"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-expressions*/ var _read_45_expressions;_read_45_expressions=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_table_45_lookup.body,[_context,["expressions"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*token-complete?*/ var _token_45_complete_63_;_token_45_complete_63_=(function(){var body=function(_token){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(__62_.body,[_vlen.main(_token_45_complete_45_rx.main(_token)),0]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*unescape-char*/ var _unescape_45_char;_unescape_45_char=(function(){var body=function(_char_45_symbol){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_char_45_symbol,"b"))?"\b":(false!==(_peq_63_.main(_char_45_symbol,"t"))?"\t":(false!==(_peq_63_.main(_char_45_symbol,"n"))?"\n":(false!==(_peq_63_.main(_char_45_symbol,"v"))?"\v":(false!==(_peq_63_.main(_char_45_symbol,"f"))?"\f":(false!==(_peq_63_.main(_char_45_symbol,"r"))?"\r":_char_45_symbol))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*unescape*/ var _unescape;_unescape=(function(){var body=function(_string){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*unescape*/ var _unescape;_unescape=(function(){var body=function(_builder,_s){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_eref){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_eref,0))?$_mktail(_sbappend.body,[_builder,_s]):(false!==(_eq_63_.main(_slen.main(_s),__43_.main(_eref,1)))?$_mktail(_error.body,[["unescape"],"invald escpae sequence",_string]):$_mktail(_unescape.body,[_sbappend.main(_sbappend.main(_builder,_subs.main(_s,0,_eref)),_unescape_45_char.main(_char_45_at.main(_s,__43_.main(_eref,1)))),_subs.main(_s,__43_.main(_eref,2),-1)])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_sidx.main(_s,"\\\\")]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_builder_45__62_string.body,[_unescape.main(_make_45_string_45_builder.main(),_string)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*unescape-symbol*/ var _unescape_45_symbol;_unescape_45_symbol=(function(){var body=function(_name){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*unescape*/ var _unescape;_unescape=(function(){var body=function(_builder,_escaped_63_,_s){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return $_mktail((function(){var body=function(_eref){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(__60_.main(_eref,0))?$_mktail(_sbappend.body,[_builder,_s]):$_mktail((function(){var body=function(_builder,_echar){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_peq_63_.main(_echar,"|"))?$_mktail(_unescape.body,[_builder,_not.main(_escaped_63_),_subs.main(_s,__43_.main(_eref,1),-1)]):(false!==(_peq_63_.main(_slen.main(_s),__43_.main(_eref,1)))?$_mktail(_sbappend.body,[_builder,"\\"]):(false!==(_peq_63_.main(_char_45_at.main(_s,__43_.main(_eref,1)),"|"))?$_mktail(_unescape.body,[_sbappend.main(_builder,"|"),_escaped,_subs.main(_s,__43_.main(_eref,2),-1)]):(false!==(_escaped_63_)?$_mktail(_unescape.body,[_sbappend.main(_builder,_subs.main(_s,_eref,2)),_true,_subs.main(_s,__43_.main(_eref,2),-1)]):$_mktail(_unescape.body,[_sbappend.main(_builder,_char_45_at.main(_s,__43_.main(_eref,1))),_false,_subs.main(_s,__43_.main(_eref,2),-1)])))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_sbappend.main(_builder,_subs.main(_s,0,_eref)),_char_45_at.main(_s,_eref)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_sidx.main(_s,"\\\\|\\|")]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_builder_45__62_string.body,[_unescape.main(_make_45_string_45_builder.main(),_false,_name)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*push-list-type*/ var _push_45_list_45_type;_push_45_list_45_type=(function(){var body=function(_context,_type){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_frame){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_table_45_define.main(_frame,["type"],_type);_table_45_define.main(_frame,["list"],[]);return $_mktail(_table_45_set_33_.body,[_context,["stack"],[_frame,_read_45_stack.main(_context)]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_name_45_table.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*push-list*/ var _push_45_list;_push_45_list=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_push_45_list_45_type.body,[_context,["list"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*push-vector*/ var _push_45_vector;_push_45_vector=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_push_45_list_45_type.body,[_context,["vector"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*push-struct*/ var _push_45_struct;_push_45_struct=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_push_45_list_45_type.body,[_context,["struct"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*replace-read-list*/ var _replace_45_read_45_list;_replace_45_read_45_list=(function(){var body=function(_context,_list){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_table_45_set_33_.body,[_current_45_stack_45_frame.main(_context),["list"],_list]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-read-expression*/ var _cons_45_read_45_expression;_cons_45_read_45_expression=(function(){var body=function(_context,_tag){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_table_45_set_33_.body,[_context,["expressions"],[_tag,_read_45_expressions.main(_context)]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-read-tag*/ var _cons_45_read_45_tag;_cons_45_read_45_tag=(function(){var body=function(_context,_tag){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}(false!==(_cons_45_closed_63_.main(_context))?_error.main(["cons-read-tag"],"unexpected tag",_tag):_true);return $_mktail((false!==(_read_45_stack_45_empty_63_.main(_context))?_cons_45_read_45_expression:_cons_45_stack_45_tag).body,[_context,_tag]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*make-pair-ended-list*/ var _make_45_pair_45_ended_45_list;_make_45_pair_45_ended_45_list=(function(){var body=function(_tokens){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*iterate*/ var _iterate;_iterate=(function(){var body=function(_tokens,_pe_45_list){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_tokens))?_pe_45_list:(false!==(_eq_63_.main(_pe_45_list,["empty"]))?$_mktail(_iterate.body,[_tokens[1][1][1],[_tokens[1][1][0],_tokens[0]]]):$_mktail(_iterate.body,[_tokens[1],[_tokens[0],_pe_45_list]])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_iterate.body,[_tokens,["empty"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*close-current-list*/ var _close_45_current_45_list;_close_45_current_45_list=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_cons_45_marked_63_.body,[_context]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_read_45_stack_45_empty_63_.main(_context)))?$_mktail(_error.body,[["close-current-list"],"unexpected closing paren",_context]):$_mktail((function(){var body=function(_closed){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_table_45_set_33_.main(_context,["stack"],_read_45_stack.main(_context)[1]);return $_mktail(_cons_45_read_45_tag.body,[_context,_closed]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[(false!==(_eq_63_.main(_current_45_read_45_list_45_type.main(_context),["vector"]))?_apply.main(_vector,_reverse.main(_current_45_read_45_list.main(_context))):(false!==(_eq_63_.main(_current_45_read_45_list_45_type.main(_context),["struct"]))?_apply.main(_struct,_current_45_read_45_list.main(_context)):(false!==(_cons_45_closed_63_.main(_context))?_make_45_pair_45_ended_45_list.main(_current_45_read_45_list.main(_context)):_reverse.main(_current_45_read_45_list.main(_context)))))]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*push-quote*/ var _push_45_quote;_push_45_quote=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_push_45_list_45_type.body,[_context,["quote"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*quoted-tag?*/ var _quoted_45_tag_63_;_quoted_45_tag_63_=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_eq_63_.body,[_current_45_read_45_list_45_type.main(_context),["quote"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-stack-tag*/ var _cons_45_stack_45_tag;_cons_45_stack_45_tag=(function(){var body=function(_context,_tag){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_list){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_replace_45_read_45_list.main(_context,_list);return (false!==(_quoted_45_tag_63_.main(_context))?$_mktail(_close_45_current_45_list.body,[_context]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[[_tag,(false!==(_quoted_45_tag_63_.main(_context))?[["quote"],_current_45_read_45_list.main(_context)]:_current_45_read_45_list.main(_context))]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-string*/ var _cons_45_string;_cons_45_string=(function(){var body=function(_context,_token){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_cons_45_read_45_tag.body,[_context,_unescape.main(_subs.main(_token,1,__45_.main(_slen.main(_token),2)))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-token?*/ var _cons_45_token_63_;_cons_45_token_63_=(function(){var body=function(_token){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_eq_63_.body,[_token,"."]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-marker?*/ var _cons_45_marker_63_;_cons_45_marker_63_=(function(){var body=function(_value){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_eq_63_.body,[_value,_cons_45_marker_63_]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*current-list-null?*/ var _current_45_list_45_null_63_;_current_45_list_45_null_63_=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_null_63_.body,[_current_45_read_45_list.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*current-read-list-not-empty?*/ var _current_45_read_45_list_45_not_45_empty_63_;_current_45_read_45_list_45_not_45_empty_63_=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_not.body,[_current_45_list_45_null_63_.main(_context)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_not.main(_read_45_stack_45_empty_63_.main(_context))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-marked?*/ var _cons_45_marked_63_;_cons_45_marked_63_=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_cons_45_marker_63_.body,[_current_45_read_45_list.main(_context)[0]]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_current_45_read_45_list_45_not_45_empty_63_.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-closed?*/ var _cons_45_closed_63_;_cons_45_closed_63_=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_cons_45_marker_63_.body,[_current_45_read_45_list.main(_context)[1][0]]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_not.main(_null_63_.main(_current_45_read_45_list.main(_context)[1]))]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_current_45_read_45_list_45_not_45_empty_63_.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cons-token*/ var _cons_45_token;_cons_45_token=(function(){var body=function(_context,_token){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_number){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_cons_45_read_45_tag.body,[_context,(false!==(_number_63_.main(_number))?_number:(false!==(_cons_45_token_63_.main(_token))?(false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_cons_45_marked_63_.body,[_context]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_not.main(_eq_63_.main(_current_45_read_45_list_45_type.main(_context),["list"]))]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_current_45_list_45_null_63_.main(_context)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_read_45_stack_45_empty_63_.main(_context)))?_error.main(["cons-token"],"unexpected cons token",_token):_cons_45_marker_63_):_string_45__62_symbol.main(_unescape_45_symbol.main(_token))))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_parse_45_number.main(_token)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*parse-token*/ var _parse_45_token;_parse_45_token=(function(){var body=function(_context,_token){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_peq_63_.main(_token,"("))?$_mktail(_push_45_list.body,[_context]):(false!==(_peq_63_.main(_token,"#("))?$_mktail(_push_45_vector.body,[_context]):(false!==(_peq_63_.main(_token,"#s("))?$_mktail(_push_45_struct.body,[_context]):(false!==(_peq_63_.main(_token,")"))?$_mktail(_close_45_current_45_list.body,[_context]):(false!==(_peq_63_.main(_token,"'"))?$_mktail(_push_45_quote.body,[_context]):(false!==(_peq_63_.main(_char_45_at.main(_token,0),"\""))?$_mktail(_cons_45_string.body,[_context,_token]):(false!==(_peq_63_.main(_char_45_at.main(_token,0),"#"))?$_mktail(_error.body,[["parse-token"],"unrecognized type escape",_token]):(false!==(_not.main(_peq_63_.main(_char_45_at.main(_token,0),";")))?$_mktail(_cons_45_token.body,[_context,_token]):_true))))))));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*shift-tokens*/ var _shift_45_tokens;_shift_45_tokens=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_table_45_set_33_.main(_read_45_tokens.main(_context),["fragments"],[]);return $_mktail(_table_45_set_33_.body,[_read_45_tokens.main(_context),["ref"],0]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*parse-tokens*/ var _parse_45_tokens;_parse_45_tokens=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}/*next-tokens*/ var _next_45_tokens;_next_45_tokens=(function(){var body=function(_tokens){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_tokens[1]))?[]:(false!==(_eq_63_.main(_vlen.main(_tokens[1][0]),0))?$_mktail(_next_45_tokens.body,[_tokens[1]]):_tokens[1]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*parse-incomplete*/ var _parse_45_incomplete;_parse_45_incomplete=(function(){var body=function(_tokens,_token){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_tokens))?[]:$_mktail((function(){var body=function(_token){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_token_45_string){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_token_45_complete_63_.main(_token_45_string))?(function(){_parse_45_token.main(_context,_token_45_string);return $_mktail(_next_45_tokens.body,[_tokens]);})():$_mktail(_parse_45_incomplete.body,[_next_45_tokens.main(_tokens),_token]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_builder_45__62_string.main(_token)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_sbappend.main(_token,(false!==(_eq_63_.main(_vref.main(_next[0],0),["eof"]))?"\n":_vref.main(_next[0],0)))]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*parse-tokens*/ var _parse_45_tokens;_parse_45_tokens=(function(){var body=function(_tokens,_ref){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_tokens))?$_mktail(_shift_45_tokens.body,[_context]):(false!==(_eq_63_.main(_vlen.main(_tokens[0]),_ref))?$_mktail(_parse_45_tokens.body,[_next_45_tokens.main(_tokens),0]):$_mktail((function(){var body=function(_token){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_eq_63_.main(_token,["eof"]))?$_mktail(_shift_45_tokens.body,[_context]):(false!==(_token_45_complete_63_.main(_token))?(function(){_parse_45_token.main(_context,_token);return $_mktail(_parse_45_tokens.body,[_tokens,__43_.main(_ref,1)]);})():$_mktail(_parse_45_tokens.body,[_parse_45_incomplete.main(_next_45_tokens.main(_tokens),_sbappend.main(_make_45_string_45_builder.main(),_token)),1])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_vref.main(_tokens[0],_ref)])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_parse_45_tokens.body,[_read_45_tokens_45_list.main(_context),_read_45_token_45_ref.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*append-tokens*/ var _append_45_tokens;_append_45_tokens=(function(){var body=function(_context,_tokens){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_table_45_set_33_.body,[_read_45_tokens.main(_context),["fragments"],_append.main(_read_45_tokens_45_list.main(_context),[_tokens,[]])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-string*/ var _read_45_string;_read_45_string=(function(){var body=function(_context,_string){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail((function(){var body=function(_tokens){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_append_45_tokens.main(_context,_tokens);return $_mktail(_parse_45_tokens.body,[_context]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_tokenizer_45_rx.main(_string)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*shift-expressions*/ var _shift_45_expressions;_shift_45_expressions=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_expressions){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_table_45_set_33_.main(_context,["expressions"],[]);return $_mktail(_reverse.body,[_expressions]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_read_45_expressions.main(_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*append-token*/ var _append_45_token;_append_45_token=(function(){var body=function(_context,_token){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_append_45_tokens.body,[_context,_vector.main(_token)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-complete?*/ var _read_45_complete_63_;_read_45_complete_63_=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_null_63_.body,[_read_45_stack.main(_context)]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_null_63_.main(_read_45_tokens_45_list.main(_context))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*complete-read*/ var _complete_45_read;_complete_45_read=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_append_45_token.main(_context,["eof"]);_parse_45_tokens.main(_context);return (false!==(_not.main(_read_45_complete_63_.main(_context)))?$_mktail(_error.body,[["complete-read"],"incomplete expression",[_read_45_tokens_45_list.main(_context),[_read_45_stack.main(_context),[]]]]):$_mktail(_shift_45_expressions.body,[_context]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*complete-read*/ var _complete_45_read;_complete_45_read=(function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_append_45_token.main(_context,["eof"]);_parse_45_tokens.main(_context);return (false!==(_not.main(_null_63_.main(_read_45_tokens_45_list.main(_context))))?$_mktail(_error.body,[["complete-read"],"incomplete expression",_read_45_tokens_45_list.main(_context)]):(false!==(_not.main(_null_63_.main(_read_45_stack.main(_context))))?$_mktail(_error.body,[["complete-read"],"incomplete expression",_read_45_stack.main(_context)]):$_mktail(_shift_45_expressions.body,[_context])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*sread*/ var _sread;_sread=(function(){var body=function(_string){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_context){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_read_45_string.main(_context,_string);return $_mktail(_complete_45_read.body,[_context]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_read_45_context.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*command?*/ var _command_63_;_command_63_=(function(){var body=function(_arg){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_peq_63_.body,[_arg,"compile"]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_arg,"test")]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_arg,"run")]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_peq_63_.main(_arg,"repl")]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*explicit-command?*/ var _explicit_45_command_63_;_explicit_45_command_63_=(function(){var body=function(_argv){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_command_63_.body,[_argv[1][1][0]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compiled-run?*/ var _compiled_45_run_63_;_compiled_45_run_63_=(function(){var body=function(){return $_mktail(_compiled_45_procedure_63_.body,[_get_45_command]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*get-command-from*/ var _get_45_command_45_from;_get_45_command_45_from=(function(){var body=function(_argv){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_argv[1][1]))?"repl":(false!==(_command_63_.main(_argv[1][1][0]))?_argv[1][1][0]:"run"));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*get-arg-from*/ var _get_45_arg_45_from;_get_45_arg_45_from=(function(){var body=function(_argv){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_null_63_.main(_argv[1][1]))?$_mktail(_error.body,[["get-arg-from"],"missing argument",_argv]):(false!==(_explicit_45_command_63_.main(_argv))?(false!==(_null_63_.main(_argv[1][1][1]))?$_mktail(_error.body,[["get-arg-from"],"missing argument",_argv]):_argv[1][1][1][0]):_argv[1][1][0]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*argv-member*/ var _argv_45_member;_argv_45_member=(function(){var body=function(_op){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_argv){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_compiled_45_run_63_.main())?$_mktail(_op.body,[_argv]):(false!==(_explicit_45_command_63_.main(_argv))?$_mktail(_op.body,[_argv[1][1]]):$_mktail(_op.body,[_argv[1]])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_proc_45_argv.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*get-command*/ var _get_45_command;_get_45_command=(function(){var body=function(){return $_mktail(_argv_45_member.body,[_get_45_command_45_from]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*get-arg*/ var _get_45_arg;_get_45_arg=(function(){var body=function(){return $_mktail(_argv_45_member.body,[_get_45_arg_45_from]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*repl*/ var _repl;_repl=(function(){var body=function(){/*env*/ var _env;_env=_create_45_env.main();/*try-eval-sequence*/ var _try_45_eval_45_sequence;_try_45_eval_45_sequence=(function(){var body=function(_exps){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_null_63_.main(_exps)))?(function(){_try.main((function(){var body=function(){return $_mktail(_print.body,[_eval_45_env.main(_env,_exps[0])]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),(function(){var body=function(_err){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_display.body,[_err]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_newline.main();return $_mktail(_try_45_eval_45_sequence.body,[_exps[1]]);})():_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-context*/ var _read_45_context;_read_45_context=_make_45_read_45_context.main();/*process-line*/ var _process_45_line;_process_45_line=(function(){var body=function(_rl,_line){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_read_45_string.main(_read_45_context,_line);_try_45_eval_45_sequence.main(_shift_45_expressions.main(_read_45_context));_set_45_prompt.main(_rl,(false!==(_read_45_complete_63_.main(_read_45_context))?"> ":". "));return $_mktail(_prompt.body,[_rl]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*rl*/ var _rl;_rl=_read_45_line.main(_process_45_line,"> ");_set_45_prompt.main(_rl,"> ");return $_mktail(_prompt.body,[_rl]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*run*/ var _run;_run=(function(){var body=function(){/*read-and-eval*/ var _read_45_and_45_eval;_read_45_and_45_eval=(function(){var body=function(_scm){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_ctx){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_read_45_string.main(_ctx,_scm);return $_mktail((function(){var body=function(_exps){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_complete_45_read.main(_ctx);return $_mktail(_eval_45_env.body,[_create_45_env.main(),[[["lambda"],[[],_exps]],[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_shift_45_expressions.main(_ctx)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_read_45_context.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_read_45_file.body,[_get_45_arg.main(),_read_45_and_45_eval]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*compile*/ var _compile;_compile=(function(){var body=function(){/*compile-head-references*/ var _compile_45_head_45_references;_compile_45_head_45_references=(function(){var body=function(_hcontext,_head_45_names){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_not.main(_null_63_.main(_head_45_names)))?(function(){_compile_45_write.main(_hcontext,"var ");_compile_45_write.main(_hcontext,_map_45_name.main(_hcontext,_head_45_names[0]));_compile_45_write.main(_hcontext,"=env(\"");_compile_45_write.main(_hcontext,_head_45_names[0]);_compile_45_write.main(_hcontext,"\");");return $_mktail(_compile_45_head_45_references.body,[_hcontext,_head_45_names[1]]);})():_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*precompile*/ var _precompile;_precompile=(function(){var body=function(_head,_done,_ccontext,_pcontext,_shared){if(arguments.length!==5){return $_cerror("procedure","invalid number of arguments",5);}return $_mktail((function(){var body=function(_shared_45_names){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_null_63_.main(_shared_45_names)))?$_mktail((function(){var body=function(_name){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}(false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?$_mktail(_table_45_has_45_name_63_.body,[_compile_45_expressions.main(_ccontext),_name]):_predicate);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_not.main(_table_45_has_45_name_63_.main(_done,_name))))?(function(){_compile_45_statement.main(_pcontext,_precompile_45_exp.main(_table_45_lookup.main(_compile_45_expressions.main(_ccontext),_name)),_false);return _copy_45_table_45_filtered.main(_table_45_lookup.main(_compile_45_definitions.main(_ccontext),_name),_shared,(function(){var body=function(_name){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_not.body,[(function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_defined_63_.body,[_head,_name]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_table_45_has_45_name_63_.main(_done,_name))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());})():_true);_table_45_define.main(_done,_name,_true);_table_45_delete_33_.main(_shared,_name);return $_mktail(_precompile.body,[_head,_done,_ccontext,_pcontext,_shared]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_shared_45_names[0]]):_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_table_45_names.main(_shared)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*read-and-compile*/ var _read_45_and_45_compile;_read_45_and_45_compile=(function(){var body=function(_ccontext,_names,_scm){if(arguments.length!==3){return $_cerror("procedure","invalid number of arguments",3);}return $_mktail((function(){var body=function(_read_45_context,_hcontext){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_compile_45_head_45_references.main(_hcontext,_head.main(_false,_false,_false,_true));_read_45_string.main(_read_45_context,_scm);return $_mktail((function(){var body=function(_exps){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_complete_45_read.main(_read_45_context);_compile_45_sequence.main(_ccontext,_exps);return $_mktail((function(){var body=function(_pcontext){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_compile_45_statement.main(_pcontext,[["define"],[["shared-precompiled"],[[["quote"],[[],[]]],[]]]],_false);_precompile.main(_extend_45_env.main(_head,_false),_make_45_name_45_table.main(),_ccontext,_pcontext,_to_45_table.main(_shared.main(),(function(){var body=function(_i){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _i[0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),_identity));_out.main(_builder_45__62_string.main(_compile_45_buffer.main(_hcontext)));return $_mktail(_out.body,[_builder_45__62_string.main(_compile_45_buffer.main(_pcontext))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_compile_45_context.main(_names)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_shift_45_expressions.main(_read_45_context)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_read_45_context.main(),_make_45_compile_45_context.main(_names)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_copy_45_head.body,[(function(){var body=function(){return $_mktail((function(){var body=function(_names){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_ccontext){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_compile_45_lang.main(_ccontext);_compile_45_shared.main(_ccontext);_out.main(_builder_45__62_string.main(_compile_45_buffer.main(_ccontext)));return $_mktail(_read_45_file.body,[_get_45_arg.main(),(function(){var body=function(_scm){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_ccontext){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_compile_45_write.main(_ccontext,"/* entry point */");_compile_45_write.main(_ccontext,_sysname.main(_ccontext,["tail-call"]));_compile_45_write.main(_ccontext,"(");_compile_45_write.main(_ccontext,_sysname.main(_ccontext,["mktail"]));_compile_45_write.main(_ccontext,"(function(){");_read_45_and_45_compile.main(_ccontext,_names,_scm);_compile_45_write.main(_ccontext,"}, []));/* exit point */");return $_mktail(_out.body,[_builder_45__62_string.main(_compile_45_buffer.main(_ccontext))]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_compile_45_context.main(_names)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_compile_45_context.main(_names)]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_make_45_name_45_map.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caar*/ var _caar;_caar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cadr*/ var _cadr;_cadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdar*/ var _cdar;_cdar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cddr*/ var _cddr;_cddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caaar*/ var _caaar;_caaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caadr*/ var _caadr;_caadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cadar*/ var _cadar;_cadar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdaar*/ var _cdaar;_cdaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caddr*/ var _caddr;_caddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdadr*/ var _cdadr;_cdadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cddar*/ var _cddar;_cddar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdddr*/ var _cdddr;_cdddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caaaar*/ var _caaaar;_caaaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caaadr*/ var _caaadr;_caaadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caadar*/ var _caadar;_caadar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cadaar*/ var _cadaar;_cadaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdaaar*/ var _cdaaar;_cdaaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caaddr*/ var _caaddr;_caaddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][0][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cadadr*/ var _cadadr;_cadadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdaadr*/ var _cdaadr;_cdaadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*caddar*/ var _caddar;_caddar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdadar*/ var _cdadar;_cdadar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cddaar*/ var _cddaar;_cddaar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][0][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cadddr*/ var _cadddr;_cadddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][1][0];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdaddr*/ var _cdaddr;_cdaddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][0][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cddadr*/ var _cddadr;_cddadr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][0][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cdddar*/ var _cdddar;_cdddar=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[0][1][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*cddddr*/ var _cddddr;_cddddr=(function(){var body=function(_l){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return _l[1][1][1][1];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*shared*/ var _shared;_shared=(function(){var body=function(){return [[["eval"],[_eval,[]]],[[["apply"],[_apply,[]]],[[["log"],[_log,[]]],[[["print"],[_print,[]]],[[["eq?"],[_eq_63_,[]]],[[["newline"],[_newline,[]]],[[["error"],[_error,[]]],[[["not"],[_not,[]]],[[["append"],[_append,[]]],[[["sprint"],[_sprint,[]]],[[["reverse"],[_reverse,[]]],[[["display"],[_display,[]]],[[["sescape"],[_sescape,[]]],[[["caar"],[_caar,[]]],[[["cadr"],[_cadr,[]]],[[["cdar"],[_cdar,[]]],[[["cddr"],[_cddr,[]]],[[["caaar"],[_caaar,[]]],[[["caadr"],[_caadr,[]]],[[["cadar"],[_cadar,[]]],[[["cdaar"],[_cdaar,[]]],[[["caddr"],[_caddr,[]]],[[["cdadr"],[_cdadr,[]]],[[["cddar"],[_cddar,[]]],[[["cdddr"],[_cdddr,[]]],[[["caaaar"],[_caaaar,[]]],[[["caaadr"],[_caaadr,[]]],[[["caadar"],[_caadar,[]]],[[["cadaar"],[_cadaar,[]]],[[["cdaaar"],[_cdaaar,[]]],[[["caaddr"],[_caaddr,[]]],[[["cadadr"],[_cadadr,[]]],[[["cdaadr"],[_cdaadr,[]]],[[["caddar"],[_caddar,[]]],[[["cdadar"],[_cdadar,[]]],[[["cddaar"],[_cddaar,[]]],[[["cadddr"],[_cadddr,[]]],[[["cdaddr"],[_cdaddr,[]]],[[["cddadr"],[_cddadr,[]]],[[["cdddar"],[_cdddar,[]]],[[["cddddr"],[_cddddr,[]]],[[["shared-precompiled"],[_shared_45_precompiled,[]]],[]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*create-env*/ var _create_45_env;_create_45_env=(function(){var body=function(){/*list->table*/ var _list_45__62_table;_list_45__62_table=(function(){var body=function(_t,_l){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_null_63_.main(_l))?_t:(function(){_table_45_define.main(_t,_l[0][0],_l[0][1][0]);return $_mktail(_list_45__62_table.body,[_t,_l[1]]);})());};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return $_mktail(_extend_45_env.body,[_mikkamakka,_list_45__62_table.main(_make_45_name_45_table.main(),_shared.main())]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();(function(){var body=function(_cmd){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_peq_63_.main(_cmd,"repl"))?$_mktail(_repl.body,[]):(false!==(_peq_63_.main(_cmd,"run"))?$_mktail(_run.body,[]):(false!==(_peq_63_.main(_cmd,"compile"))?$_mktail(_compile.body,[]):_true)));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_get_45_command.main());/*last-test-name*/ var _last_45_test_45_name;_last_45_test_45_name=_false;/*string-contains?*/ var _string_45_contains_63_;_string_45_contains_63_=(function(){var body=function(_val,_pattern){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(__62__61_.body,[_sidx.main(_sprint.main(_val),_pattern),0]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*list-eq?*/ var _list_45_eq_63_;_list_45_eq_63_=(function(){var body=function(_left,_right){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==((function(){var body=function(_predicate){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_predicate)?_predicate:$_mktail(_not.body,[_pair_63_.main(_right)]));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().main(_not.main(_pair_63_.main(_left))))?$_mktail(_eq_63_.body,[_left,_right]):(false!==(_not.main(_list_45_eq_63_.main(_left[0],_right[0])))?_false:$_mktail(_list_45_eq_63_.body,[_left[1],_right[1]])));};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*assert*/ var _assert;_assert=(function(){var body=function(_val,_msg){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return (false!==(_val)?_val:(function(){_print.main(_cats.main(_last_45_test_45_name,": failed: ",_msg));return $_mktail(_exit.body,[-1]);})());};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*fail*/ var _fail;_fail=(function(){var body=function(_msg,_f){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}return $_mktail(_try.body,[(function(){var body=function(){_f.main();return $_mktail(_assert.body,[_false,_msg]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),(function(){var body=function(_error){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return (false!==(_not.main(_string_45_contains_63_.main(_error,_msg)))?(function(){_print_45_stack.main(_error);return $_mktail(_assert.body,[_false,_msg]);})():_true);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*test*/ var _test;_test=(function(){var body=function(_name,_f){if(arguments.length!==2){return $_cerror("procedure","invalid number of arguments",2);}_last_45_test_45_name=_name;return $_mktail((function(){var body=function(_env){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_try.body,[(function(){var body=function(){return $_mktail(_f.body,[(function(){var body=function(_exp){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_eval_45_env.body,[_env,_exp]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),(function(){var body=function(_error){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_print.main(_cats.main(_name,": error during test:"));_print_45_stack.main(_error);return $_mktail(_exit.body,[]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_create_45_env.main()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();/*run-tests*/ var _run_45_tests;_run_45_tests=(function(){var body=function(){_test.main("symbol?",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_symbol_63_.main(["a"]),"true");return $_mktail(_assert.body,[_not.main(_symbol_63_.main("a")),"false"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("len",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_len.main([1,[2,[3,[]]]]),3),"3");return $_mktail(_assert.body,[_eq_63_.main(_len.main([]),0),"0"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("quote-eq?",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_quote_45_eq_63_.main([["quote"],[["a"],[]]],[["quote"],[["a"],[]]]),"eq");return $_mktail(_assert.body,[_not.main(_quote_45_eq_63_.main([["quote"],[["a"],[]]],[["quote"],[["b"],[]]])),"not eq"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("eq",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main([],[]),"null");_assert.main(_eq_63_.main(["a"],["a"]),"symbol");_assert.main(_eq_63_.main([["quote"],[["a"],[]]],[["quote"],[["a"],[]]]),"quote");_assert.main(_eq_63_.main(1,1),"primitive");return $_mktail((function(){var body=function(_a){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail((function(){var body=function(_b){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_assert.body,[_eq_63_.main(_a,_b),"reference"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[_a]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})().body,[(function(){var body=function(){return 1;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("tagged-list?",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_tagged_45_list_63_.main([["a"],[]],["a"]),"true");_assert.main(_not.main(_tagged_45_list_63_.main([["a"],[]],["b"])),"wrong tag");return $_mktail(_assert.body,[_not.main(_tagged_45_list_63_.main(1,["a"])),"not list"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("check-quote",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_assert.body,[_eq_63_.main(_check_45_quote.main([["quote"],[["a"],[]]]),_true),"ok"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("escape",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_sescape.main("\b\t\v\f\n\r\\\""),"\\b\\t\\v\\f\\n\\r\\\\\\\""),"escape");_assert.main(_list_45_eq_63_.main(_sread.main("\"\b\t\v\f\n\r\\\\\\\"\""),["\b\t\v\f\n\r\\\"",[]]),"read");_assert.main(_eq_63_.main(_sunescape.main("\\b\\t\\v\\f\\n\\r\\\\\\\""),"\b\t\v\f\n\r\\\""),"unescape");_assert.main(_list_45_eq_63_.main(_sread.main("\"\\b\\t\\v\\f\\n\\r\\\\\\\"\""),["\b\t\v\f\n\r\\\"",[]]),"read escaped");_assert.main(_eq_63_.main(_sescape_45_symbol_45_name.main("a"),"a"),"symbol name normal");return $_mktail(_assert.body,[_eq_63_.main(_sescape_45_symbol_45_name.main("a\na"),"|a\na|"),"symbol name escaped"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("sprint",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_sprint.main(1),"1"),"number");_assert.main(_eq_63_.main(_sprint.main("some string"),"\"some string\""),"string");_assert.main(_eq_63_.main(_sprint.main("some string with \"apostrophs\" in it"),"\"some string with \\\"apostrophs\\\" in it\""),"string, apostrophs");_assert.main(_eq_63_.main(_sprint.main(["a"]),"'a"),"quote");_assert.main(_eq_63_.main(_sprint.main([["a"],[["b"],[["c"],[]]]]),"'(a b c)"),"list");_assert.main(_eq_63_.main(_sprint.main([["a"],[["b"],[[["c"],[[["quote"],[["d"],[]]],[]]],[]]]]),"'(a b (c 'd))"),"list, embedded list");_assert.main(_eq_63_.main(_sprint.main([["a"],[["b"],[[["quote"],[[["c"],[[["quote"],[["d"],[]]],[]]],[]]],[]]]]),"'(a b '(c 'd))"),"list, embedded quoted list");return $_mktail(_assert.body,[_eq_63_.main(_sprint.main([["a"],[["b"],[[["quote"],[[["c"],[[["quote"],[["d"],[]]],[[["quote"],[[["quote"],[["d"],[]]],[]]],[]]]],[]]],[]]]]),"'(a b '(c 'd ''d))"),"list, double quote"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("self-evaluating?",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_self_45_evaluating_63_.main(_false),"false");_assert.main(_self_45_evaluating_63_.main(_true),"true");_assert.main(_self_45_evaluating_63_.main(1),"number");_assert.main(_self_45_evaluating_63_.main("some string"),"string");return $_mktail(_assert.body,[_not.main(_self_45_evaluating_63_.main((function(){var body=function(){return _false;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})())),"lambda"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("check-assignment",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_check_45_assignment.main([["set!"],[["a"],[1,[]]]]),_true),"valid");_fail.main("invalid arity",(function(){var body=function(){return $_mktail(_check_45_assignment.body,[[["set!"],[["a"],[]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail(_fail.body,["invalid variable name",(function(){var body=function(){return $_mktail(_check_45_assignment.body,[[["set!"],[1,[1,[]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("definition-variable",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_definition_45_variable.main([["define"],[["a"],[1,[]]]]),["a"]),"variable");return $_mktail(_assert.body,[_eq_63_.main(_definition_45_variable.main([["define"],[[["a"],[]],[1,[]]]]),["a"]),"procedure"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("definition-value",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_definition_45_value.main([["define"],[["a"],[1,[]]]]),1),"variable");return $_mktail(_assert.body,[_list_45_eq_63_.main(_definition_45_value.main([["define"],[[["a"],[]],[1,[2,[]]]]]),[["lambda"],[[],[1,[2,[]]]]]),"procedure"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("check-definition",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_check_45_definition.main([["define"],[["a"],[1,[]]]]),_true),"variable");_assert.main(_eq_63_.main(_check_45_definition.main([["define"],[[["a"],[]],[1,[]]]]),_true),"procedure");_fail.main("invalid format",(function(){var body=function(){return $_mktail(_check_45_definition.body,[[["define"],[["a"],[]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail(_fail.body,["invalid variable name",(function(){var body=function(){return $_mktail(_check_45_definition.body,[[["define"],[[1,[]],[1,[]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("validate-if",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_check_45_if.main([["if"],[1,[2,[3,[]]]]]),_true),"valid");return $_mktail(_fail.body,["invalid arity",(function(){var body=function(){return $_mktail(_check_45_if.body,[[["if"],[1,[2,[3,[4,[]]]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("check-lambda",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_check_45_lambda.main([["lambda"],[[],[1,[]]]]),_true),"valid");_fail.main("invalid arity",(function(){var body=function(){return $_mktail(_check_45_lambda.body,[[["lambda"],[[],[]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail(_fail.body,["invalid argument list",(function(){var body=function(){return $_mktail(_check_45_lambda.body,[[["lambda"],[1,[2,[]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("validate-begin",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_check_45_begin.main([["begin"],[1,[]]]),"valid");return $_mktail(_fail.body,["invalid arity",(function(){var body=function(){return $_mktail(_check_45_begin.body,[[["begin"],[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("sequence->exp",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_sequence_45__62_exp.main([]),[]),"null");_assert.main(_eq_63_.main(_sequence_45__62_exp.main([1,[]]),1),"single item");return $_mktail(_assert.body,[_list_45_eq_63_.main(_sequence_45__62_exp.main([1,[2,[]]]),[["begin"],[1,[2,[]]]]),"sequence"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("expand-clauses",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_list_45_eq_63_.main(_expand_45_clauses.main([[1,[1,[]]],[[2,[2,[]]],[[["else"],[3,[]]],[]]]]),[["if"],[1,[1,[[["if"],[2,[2,[3,[]]]]],[]]]]]),"ok");_fail.main("invalid syntax",(function(){var body=function(){return $_mktail(_expand_45_clauses.body,[[1,[[2,[2,[]]],[[["else"],[3,[]]],[]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail(_fail.body,["else clause isn't last",(function(){var body=function(){return $_mktail(_expand_45_clauses.body,[[[1,[1,[]]],[[["else"],[2,[]]],[[3,[3,[]]],[]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("expand-and",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_list_45_eq_63_.main(_expand_45_and.main([]),["true"]),"null");return $_mktail(_assert.body,[_list_45_eq_63_.main(_expand_45_and.main([1,[2,[3,[]]]]),[[["lambda"],[[["predicate"],[]],[[["if"],[["predicate"],[[[["lambda"],[[["predicate"],[]],[[["if"],[["predicate"],[3,[["predicate"],[]]]]],[]]]],[2,[]]],[["predicate"],[]]]]],[]]]],[1,[]]]),"list"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("expand-or",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_list_45_eq_63_.main(_expand_45_or.main([]),["false"]),"null");return $_mktail(_assert.body,[_list_45_eq_63_.main(_expand_45_or.main([1,[2,[3,[]]]]),[[["lambda"],[[["predicate"],[]],[[["if"],[["predicate"],[["predicate"],[[[["lambda"],[[["predicate"],[]],[[["if"],[["predicate"],[["predicate"],[3,[]]]]],[]]]],[2,[]]],[]]]]],[]]]],[1,[]]]),"list"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("validate-let",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_check_45_let.main([["let"],[[[["a"],[1,[]]],[]],[["a"],[]]]]),_true),"ok");_fail.main("invalid arity",(function(){var body=function(){return $_mktail(_check_45_let.body,[[["let"],[[[["a"],[1,[]]],[]],[]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail(_fail.body,["invalid syntax",(function(){var body=function(){return $_mktail(_check_45_let.body,[[["let"],[1,[1,[]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("let->procedure",(function(){var body=function(__){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_assert.body,[_list_45_eq_63_.main(_let_45__62_procedure.main([["let"],[[[["a"],[1,[]]],[]],[["a"],[]]]]),[[["lambda"],[[["a"],[]],[["a"],[]]]],[1,[]]]),"transform"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("false, true",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main(["false"]),_false),"false");return $_mktail(_assert.body,[_eq_63_.main(_eval.main(["true"]),_true),"true"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("self evaluation",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main(1),1),"number");return $_mktail(_assert.body,[_eq_63_.main(_eval.main("some string"),"some string"),"string"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("variable",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_fail.main(".*",(function(){var body=function(){return $_mktail(_eval.body,[["a"]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_assert.main(_eq_63_.main(_eval.main([["define"],[["a"],[1,[]]]]),1),"definition");return $_mktail(_assert.body,[_eq_63_.main(_eval.main(["a"]),1),"lookup"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("quote",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_fail.main("invalid quotation",(function(){var body=function(){return $_mktail(_eval.body,[[["quote"],[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_assert.main(_eq_63_.main(_eval.main(1),1),"number");_assert.main(_eq_63_.main(_eval.main("some string"),"some string"),"string");return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["quote"],[["a"],[]]]),["a"]),"quote"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("assignment",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([["define"],[["a"],[1,[]]]]),1),"define");_assert.main(_eq_63_.main(_eval.main([["set!"],[["a"],[2,[]]]]),2),"assign");_assert.main(_eq_63_.main(_eval.main(["a"]),2),"lookup");_assert.main(_eq_63_.main(_eval.main([[["lambda"],[[],[[["define"],[["a"],[3,[]]]],[[["set!"],[["a"],[4,[]]]],[["a"],[]]]]]],[]]),4),"in lambda");return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["apply"],[[["lambda"],[[],[[["define"],[["a"],[3,[]]]],[[["set!"],[["a"],[4,[]]]],[["a"],[]]]]]],[[["quote"],[[],[]]],[]]]]),4),"in apply"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("define",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([["define"],[["a"],[1,[]]]]),1),"define variable");_assert.main(_eq_63_.main(_eval.main(["a"]),1),"verify variable");return $_mktail(_eval.body,[[["define"],[[["a"],[]],[2,[]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("if",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([["if"],[["false"],[1,[0,[]]]]]),0),"false");_assert.main(_eq_63_.main(_eval.main([["if"],[["true"],[1,[0,[]]]]]),1),"true");return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["if"],["anything else",[1,[0,[]]]]]),1),"anything else"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("lambda",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_assert.body,[_eq_63_.main(_eval.main([[["lambda"],[[],[1,[]]]],[]]),1),"create and call lambda"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("begin",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([["begin"],[[["define"],[["a"],[1,[]]]],[2,[]]]]),2),"execute sequence");_assert.main(_eq_63_.main(_eval.main(["a"]),1),"verify side effect");return $_mktail(_fail.body,["arity",(function(){var body=function(){return $_mktail(_eval.body,[[["begin"],[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("cond",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([["cond"],[[["true"],[0,[]]],[[["false"],[1,[]]],[[["else"],[2,[]]],[]]]]]),0),"first");_assert.main(_eq_63_.main(_eval.main([["cond"],[[["false"],[0,[]]],[[["true"],[1,[]]],[[["else"],[2,[]]],[]]]]]),1),"second");_assert.main(_eq_63_.main(_eval.main([["cond"],[[["false"],[0,[]]],[[["false"],[1,[]]],[[["else"],[2,[]]],[]]]]]),2),"else");_assert.main(_eq_63_.main(_eval.main([["cond"],[]]),_true),"no clauses");_assert.main(_eq_63_.main(_eval.main([["cond"],[[["false"],[]],[]]]),_true),"implicit else clause");return $_mktail(_fail.body,["invalid syntax",(function(){var body=function(){return $_mktail(_eval.body,[[["cond"],[1,[]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("and",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([["and"],[]]),_true),"no expression");_assert.main(_eq_63_.main(_eval.main([["and"],[["false"],[]]]),_false),"single, false");_assert.main(_eq_63_.main(_eval.main([["and"],[["true"],[]]]),_true),"single, true");_assert.main(_eq_63_.main(_eval.main([["and"],["something",[]]]),"something"),"single, string");_assert.main(_eq_63_.main(_eval.main([["and"],[1,[2,[]]]]),2),"two");_assert.main(_eq_63_.main(_eval.main([["and"],[1,[2,[3,[]]]]]),3),"three");_assert.main(_eq_63_.main(_eval.main([["and"],[1,[2,[["false"],[]]]]]),_false),"three, false");_assert.main(_eq_63_.main(_eval.main([["and"],[1,[["false"],[2,[]]]]]),_false),"two, false");return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["and"],[["false"],[1,[2,[]]]]]),_false),"one, false"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("or",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([["or"],[]]),_false),"no expression");_assert.main(_eq_63_.main(_eval.main([["or"],[["false"],[]]]),_false),"single, false");_assert.main(_eq_63_.main(_eval.main([["or"],[["true"],[]]]),_true),"single, true");_assert.main(_eq_63_.main(_eval.main([["or"],["something",[]]]),"something"),"something");_assert.main(_eq_63_.main(_eval.main([["or"],[1,[]]]),1),"number");_assert.main(_eq_63_.main(_eval.main([["or"],[1,[2,[]]]]),1),"two");_assert.main(_eq_63_.main(_eval.main([["or"],[1,[2,[3,[]]]]]),1),"three");_assert.main(_eq_63_.main(_eval.main([["or"],[1,[["false"],[]]]]),1),"first");_assert.main(_eq_63_.main(_eval.main([["or"],[["false"],[1,[]]]]),1),"second");return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["or"],[["false"],[["false"],[1,[]]]]]),1),"third"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("let",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([["let"],[[[["a"],[1,[]]],[[["b"],[2,[]]],[]]],[["b"],[["a"],[]]]]]),1),"sequence");_assert.main(_eq_63_.main(_eval.main([["let"],[[[["a"],[1,[]]],[[["b"],[2,[]]],[]]],[[["and"],[["a"],[["b"],[]]]],[]]]]),2),"operation");_fail.main("invalid arity",(function(){var body=function(){return $_mktail(_eval.body,[[["let"],[]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_fail.main("invalid syntax",(function(){var body=function(){return $_mktail(_eval.body,[[["let"],[1,[2,[3,[]]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return $_mktail(_fail.body,[".*",(function(){var body=function(){return $_mktail(_eval.body,[[["let"],[[1,[]],[2,[3,[]]]]]]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("application",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_eval.main([[["lambda"],[[],[1,[]]]],[]]),1),"lambda");_eval.main([["define"],[[["a"],[]],[1,[]]]]);_assert.main(_eq_63_.main(_eval.main([["a"],[]]),1),"procedure from shortcut");_eval.main([["define"],[["a"],[[["lambda"],[[],[2,[]]]],[]]]]);_assert.main(_eq_63_.main(_eval.main([["a"],[]]),2),"procedure from variable");_eval.main([["define"],[[["a"],[["x"],[]]],[[["if"],[["x"],["it's true",["it's false",[]]]]],[]]]]);_assert.main(_eq_63_.main(_eval.main([["a"],[["true"],[]]]),"it's true"),"with args, true");_assert.main(_eq_63_.main(_eval.main([["a"],[["false"],[]]]),"it's false"),"with args, false");return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["a"],["just anything",[]]]),"it's true"),"with args, anything"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("primitive procedures",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["+"],[1,[2,[]]]]),3),"add"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("try",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_eq_63_.main(_try.main((function(){var body=function(){return 1;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),(function(){var body=function(_err){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return 2;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()),1),"try");_assert.main(_eq_63_.main(_try.main((function(){var body=function(){return $_mktail(_error.body,[["try"],"err","test"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})(),(function(){var body=function(_err){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return 1;};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})()),1),"catch");_assert.main(_eq_63_.main(_eval.main([["try"],[[["lambda"],[[],[1,[]]]],[[["lambda"],[[["err"],[]],[2,[]]]],[]]]]),1),"eval, try");_assert.main(_eq_63_.main(_eval.main([["try"],[[["lambda"],[[],[[["error"],[[["quote"],[["try"],[]]],["err",["test",[]]]]],[]]]],[[["lambda"],[[["err"],[]],[1,[]]]],[]]]]),1),"eval, catch");_assert.main(_eq_63_.main(_eval.main([["try"],[[["lambda"],[[],[[["car"],[[["quote"],[[1,[2,[]]],[]]],[]]],[]]]],[[["lambda"],[[["err"],[]],[2,[]]]],[]]]]),1),"primitive call, try");return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["try"],[[["lambda"],[[],[[["error"],[[["quote"],[["try"],[]]],["err",["test",[]]]]],[]]]],[[["lambda"],[[["error"],[]],[[["car"],[[["quote"],[[1,[2,[]]],[]]],[]]],[]]]],[]]]]),1),"primitive call, catch"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("eval",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["eval"],[[["quote"],[[["car"],[[["quote"],[[1,[2,[]]],[]]],[]]],[]]],[]]]),1),"inner eval"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("apply",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}return $_mktail(_assert.body,[_eq_63_.main(_eval.main([["apply"],[["car"],[[["quote"],[[[1,[2,[]]],[]],[]]],[]]]]),1),"inner apply"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());_test.main("vector",(function(){var body=function(_eval){if(arguments.length!==1){return $_cerror("procedure","invalid number of arguments",1);}_assert.main(_vector_63_.main({vector:[1,2,3]}),"vector literal");_assert.main(_vector_63_.main(_sread.main("#(1 2 3)")[0]),"read vector");_assert.main(_vector_63_.main(_eval.main(_sread.main("#(1 2 3)")[0])),"eval vector");_assert.main(_eq_63_.main(_sprint.main(_sread.main("#(1 2 3)")[0]),"#(1 2 3)"),"print vector");return $_mktail(_assert.body,[_eq_63_.main(_sprint.main(_sread.main("'(a b #(1 2 (1 2 3) c #(1 2 3 4)))")[0]),"'(a b #(1 2 (1 2 3) c #(1 2 3 4)))"),"compose vector"]);};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})());return ["end-tests"];};var p=function(){return $_tail_45_call($_mktail(body,Array.prototype.slice.call(arguments)));};p.main=p;p.body=body;return p;})();return (false!==(_peq_63_.main(_get_45_command.main(),"test"))?$_mktail(_run_45_tests.body,[]):_true);}, []));/* exit point */